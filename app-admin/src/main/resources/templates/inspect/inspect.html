<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <th:block th:insert="~{layout/common :: head}"></th:block>
    </head>
<style>
    @media screen and (max-width: 680px) {
    }
.gone { visibility: hidden; }
</style>

<div class="wrap" id="a10">
    <!-- 오버레이 처리 -->
    <div id="overlay"></div>

    <!-- 컨테이너 -->
    <div id="container">
        <!-- 내비게이션 바 -->
        <th:block th:insert="~{layout/common :: navbar}"></th:block>
    
        <!-- 메인 -->
        <div id="main">

            <div id="loading"><div class="round spinner"></div></div>
            <input type="hidden" id="modal_guide_id"/>
            <!-- 헤더 -->
            <th:block th:insert="~{layout/common :: header}"></th:block>
    
            <!-- 바디 -->
            <div id="body">
                <!-- 콘텐트 -->
                <div class="content-wrapper">
                    <!-- 콘텐트 헤더 -->
                    <div class="content-header">
                        <div class="content-title">
                            <span class="ct-text">차량 점검표 <span th:text="${#numbers.formatInteger(page.totalElements , 0 , 'COMMA')}" class="search-count">999,999,999</span>건이 검색되었습니다.</span>
                        </div>
                        <div class="breadcrumb">
                            <a th:href="@{/}" class="bc-item">Home</a>
                            <a class="bc-item">차량점검표</a>
                        </div>
                    </div>
                    <!-- 콘텐트 바디 -->
                    <div class="content-body width-1920">
                        <!-- 테이블 아이템 01 -->
                        <div class="content-item">
                            <div class="content-item-header flex-between">
                                <div class="header-option">
                                    <div class="search-option">
                                        <span class="option-title">검색어</span>
                                        <input th:value="${param.search}" id="searchText" class="so_input" type="text" placeholder="이름, 연락처를 입력하세요.">
                                        <input th:value="${guideId}" id="guideDetail" class="so_input" type="hidden" />
                                    </div>
                                    <button id="btnSearch" class="ho_button btn-search hover01 ml-10">검색</button>
                                </div>
                                <div class="etc-option toggle-target">
                                    <div class="eo-icon hover01"><i class="xi-ellipsis-h"></i></div>
                                    <div class="eo-menus">
                                        <div onclick="javascript:activeModal_ExcelDownload(); return false;" class="btn-download_excel">엑셀 다운로드</div>
                                        <div class="view-option">
                                            <div class="vo-item toggle-select"onclick="javascript:searchValue(15); return false;">15개씩 보기</div>
                                            <div class="vo-item toggle-select" onclick="javascript:searchValue(30); return false;">30개씩 보기</div>
                                            <div class="vo-item toggle-select" onclick="javascript:searchValue(60); return false;">60개씩 보기</div>
                                            <div class="vo-item toggle-select" onclick="javascript:searchValue(120); return false;">120개씩 보기</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content-item-body">
                                <div class="table-wrapper">
                                    <div class="table overflow-scroll">
                                        <div class="table-body">
                                            <div class="item-list ti-header">
                                                <div class="t-item">
                                                    <div class="td center-align toggle-target" data-width="20">QN#</div>
                                                    <div class="td center-align toggle-target" data-width="10">차량번호</div>
                                                    <div class="td center-align toggle-target" data-width="15">브랜드</div>
                                                    <div class="td center-align toggle-target" data-width="25">모델(트림)</span></div>
                                                    <div class="td center-align toggle-target" data-width="10">연식</span></div>
                                                    <div class="td center-align toggle-target" data-width="20">고객 담당자(연락처)</div>
                                                    <div class="td center-align toggle-target" data-width="10">상태</div>
                                                </div>
                                            </div>
                                            <div class="item-list ti-standard">
                                                <div th:each="item, stat : ${content}" th:id="${item.id}" class="t-item">
                                                    <div th:text="${item.serial}" class="td center-align">BC2105000002</div>
                                                    <div th:text="${item.carNumber}" class="td center-align">123가1234</div>
                                                    <div th:text="${item.carManufacturer}" class="td center-align">현대</div>
                                                    <div th:text="${item.carModel + ' ' + item.carClassName}" class="td center-align">팰리세이드(프레스티지)</div>
                                                    <div th:text="${item.carMadedYear+'.'+item.carMadedMonth}" class="td center-align">2020.5</div>
                                                    <div th:text="${item.customerName+'('+item.customerContact+')'}" class="td center-align">홍길동 이사(010-1234-5678)</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'REQUEST')}" class="td center-align guide-color-01">가이드 요청</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'FINISH')}" class="td center-align guide-color-02">가이드 완료</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'BUY_REQUEST')}" class="td center-align guide-color-03">매입요청</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'BUY')}" class="td center-align guide-color-04">매입</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'AUCTION_SUCCESS')}" class="td center-align guide-color-02">경매(낙찰)</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'AUCTION_FAIL')}" class="td center-align guide-color-05">경매(유찰)</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'WAIT_FOR_MAX')}" class="td center-align guide-color-06">최고가대기</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'WAIT_FOR_SECOND')}" class="td center-align guide-color-06">2등대기</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'SELLING')}" class="td center-align guide-color-01">판매중</div>
                                                    <div th:if="${#strings.equals(item.guideStatus, 'SELL')}" class="td center-align guide-color-03">매각</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" id="page" th:value="${page.page}">
                                    <input type="hidden" id="size" th:value="${page.size}">
                                    <input type="hidden" id="sort" th:value="${page.sort}">
                                    <input type="hidden" id="direction" th:value="${page.direction}">
                                    <input type="hidden" id="search" th:value="${search}">
                                    <div th:if="${page.totalPages > 0}" class="table-pagination">
                                        <!--
                                        <a th:if="${page.page != 1}" th:href="@{/admin/member(page=${page.page - 1}, size=${page.size})}"
                                           class="tp-first"><img th:src="@{/assets/img/icon-arrow_left2.png}"  alt=""></a>
                                        -->

                                        <a th:if="${page.isFirst == false}"
                                           th:href="@{/admin/inspect(page=${page.page - 1}, size=${page.size}, search=${param.search})}"
                                           class="tp-prev"><img th:src="@{/assets/img/icon-arrow_left.png}"  alt=""></i></a>

                                        <div class="tp-nav">
                                            <a th:each="item, stat : ${ #numbers.sequence(page.startPage, page.endPage)}"
                                               th:classappend="${item == page.page+1 ? 'active' : ''}"
                                               th:href="@{/admin/inspect(page=${item-1}, size=${page.size}, search=${param.search})}"
                                               th:text="${item}"
                                               class="pg_num">1</a>
                                        </div>
                                        <a th:if="${page.isLast == false}"
                                           th:href="@{/admin/inspect(page=${page.page + 1}, size=${page.size}, search=${param.search})}"
                                           class="tp-next"><img th:src="@{/assets/img/icon-arrow_right.png}" alt=""></i></a>
                                        <!--
                                        <a class="tp-last"><img th:src="@{/assets/img/icon-arrow_right2.png}"  alt=""></i></a>
                                        -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- 푸터 -->
            <th:block th:insert="~{layout/common :: footer}"></th:block>
        </div>
    </div>

    <!-- 팝업 -->
    <div class="modal">
        <div class="modal-wrapper main-modal modal-check_list width-800">
            <div class="modal-header">
                <div class="modal-title">
                    <span id="ins_serial" class="mt-text">차량점검표 QN# (BC20210500002)</span>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">차량점검표</a>
                    <a class="bc-item">상세</a>
                </div>
            </div>
            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량점검표 작성자</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름(관리지점)</div>
                        <div class="modal-item_content">
                            <input id="ins_name" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">아이디</div>
                        <div class="modal-item_content">
                            <input id="ins_email_address" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="ins_member_phone" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">소속/지점</div>
                        <div class="modal-item_content">
                            <input id="ins_member_group" class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량 정보</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">브랜드</div>
                        <div class="modal-item_content">
                            <input id="ins_car_manufacturer"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">모델</div>
                        <div class="modal-item_content">
                            <input id="ins_car_model"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">세부모델</div>
                        <div class="modal-item_content">
                            <input id="ins_car_model_detail"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">등급</div>
                        <div class="modal-item_content">
                            <input id="ins_car_class"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">트림</div>
                        <div class="modal-item_content">
                            <input id="ins_car_trim"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연식</div>
                        <div class="modal-item_content">
                            <input id="ins_car_made"class="mi_input" type="text"  readonly>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연료</div>
                        <div class="modal-item_content">
                            <input id="ins_fuel_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">배기량</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_car_displacement" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">cc</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">미션</div>
                        <div class="modal-item_content">
                            <input id="ins_motor_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">주행거리</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_mileage"class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">Km</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">사고유무</div>
                        <div class="modal-item_content">
                            <input id="ins_accident"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">색상</div>
                        <div class="modal-item_content">
                            <input id="ins_car_color"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량번호</div>
                        <div class="modal-item_content">
                            <input id="ins_car_number" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">신차 가격(만원)</div>
                        <div class="modal-item_content">
                            <input id="ins_new_car_price" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">기타 사항</div>
                        <div class="modal-item_content">
                            <input id="ins_other" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">옵션</div>
                        <div class="modal-item_content">
                            <div id="ins_option_div" class="option-list">
                                <span class="option-item">파노라마 썬루프</span>
                                <span class="option-item">AUX</span>
                                <span class="option-item">등등</span>
                            </div>
                        </div>
                    </div>
                    <!--
                    <div class="modal-item width-50p">
                        <div class="modal-item_title">주요옵션</div>
                        <div class="modal-item_content">
                            <input id="ins_option" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>
                    -->
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가격</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">가이드 가격</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_guide_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">데미지체크 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_damage_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">체크리스트 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_check_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">평가사 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_evaluator_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">평가사 평가사유</span>
                </div>

                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">평가사유</div>
                        <div class="modal-item_content">
                            <input id="ins_evaluator_minus_reason" class="mi_input" type="text" placeholder="평가사유를 입력해주세요.">
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content content-type02">
                <div class="content-title">
                    <span class="ct-title">최종 매입 가격</span>
                </div>

                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content">
                            <span id="ins_final_buy_price" class="total-price"></span><span> 만원</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">데미지 체크</span>
                </div>

                <div class="content-item w100p pb-10">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content border-none">
                            <div class="damage-check-container">
                                <div class="dc-image">
                                    <div class="image-side">
                                        <a id="ins_damage_side_img_url_a" target="_blank">
                                            <img id="ins_damage_side_img_url" style="width: 500px; height: 300px;" th:src="@{/assets/img/img-car_side.png}"  alt="">
                                        </a>
                                    </div>
                                    <div class="image-top">
                                        <a id="ins_damage_top_img_url_a" target="_blank">
                                            <img id="ins_damage_top_img_url" style="width: 500px; height: 300px;" th:src="@{/assets/img/img-car_top.png}" src="./assets/img/img-car_top.png" alt="">
                                        </a>
                                    </div>
                                    <div class="image-under">
                                        <a id="ins_damage_bottom_img_url_a" target="_blank">
                                            <img id="ins_damage_bottom_img_url" style="width: 500px; height: 300px;" th:src="@{/assets/img/img-car_under.png}" src="./assets/img/img-car_under.png" alt="">
                                        </a>
                                    </div>
                                </div>
                                <div class="dc-ref mt-25 mb-25">
                                    <div class="marking-item">
                                        <span class="marker-a">A</span>
                                        <span class="mi-desc">기교환</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-b">B</span>
                                        <span class="mi-desc">기판금</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-c">C</span>
                                        <span class="mi-desc">기도색</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-d">D</span>
                                        <span class="mi-desc">교환요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-e">E</span>
                                        <span class="mi-desc">판금요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-f">F</span>
                                        <span class="mi-desc">도색요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker-g">G</span>
                                        <span class="mi-desc">기타</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">데미지 체크 세부 내역</span>
                </div>

                <div class="content-item flex-row-3 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">기교환 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_gyohwan_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_gyohwan_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기판금 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_pangum_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_pangum_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기도색 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_dosaek_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_dosaek_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">교환요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_gyohwan_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_gyohwan_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">판금요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_pangum_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_pangum_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">도색요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_dosaek_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_dosaek_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기타 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_other_cnt" class="ci-count">3 판</span>
                            <span id="ins_other_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                </div>
            </div>


            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">체크리스트</span>
                </div>

                <div class="content-item mt-15">
                    <div class="modal-item width-40p">
                        <div class="modal-item_title">체크리스트 합계</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_check_list_total" class="mi_input" type="text">
                            <span class="bb-text">원</span>
                        </div>
                    </div>

                    <div class="checked-item-list">
                        <div class="checked-item">
                            <p class="ci-tit">차량 내부 크리닝 필요</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">로커암 개스킷 누유</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">타이어 마모 [3 EA]</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">타이어 마모 [기타]</p>
                            <p class="ci-price">800,000 원</p>
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">타이어마모 기타 사유</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_tire_wear_reason"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">사진</span>
                </div>

                <div class="content-item w100p">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content image-wrapper">
                            <div id="modal_guide_images" name="guide-image" class="image-container">

                            </div>
                            <button name="image-down" class="mf_button btn-submit hover01 mt-20">전체 다운</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input id="insComment" class="mi_input" type="text" placeholder="내용을 입력하세요.">
                            <button id="btnSaveInsComment"class="mf_button btn-submit hover01 ml-10 mr-0">댓글 등록</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div id="ins_guide_comment" class="content-item w100p pb-20">
                    <!--
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">홍길동 이사 <span class="item-date">2021-06-03 10:10</span></div>
                        <div class="modal-item_content">
                            <input class="mi_input" type="text">
                        </div>
                    </div>
                    -->
                </div>
            </div>

            <div class="modal-footer">
                <button id="btnGuideDetail" class="mf_button btn-guide hover01">가이드</button>
                <button id="btnDeleteInspect"class="mf_button btn-submit hover01">삭제</button>
                <button id="btnSaveInspect"class="mf_button btn-save hover01">저장</button>
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>




        <div class="modal-wrapper main-modal modal-guide_detail width-800">
            <div class="modal-header">
                <div class="modal-title">
                    <span id="modal_guide_serial" class="mt-text">가이드 QN# (BC20210500002)</span>
                    <input type="hidden" id="modal_guide_id"/>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">가이드</a>
                    <a class="bc-item">가이드 상세</a>
                </div>
            </div>
            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">고객 담당자</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름(관리지점)</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">아이디</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_email" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_phone" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">소속/지점</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_group_branch"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">고객 정보</span>
                </div>

                <div class="content-item flex-row-2 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">고객명</div>
                        <div class="modal-item_content">
                            <input id="modal_customer_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">고객연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_customer_phone" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가이드 이력</span>
                </div>

                <div class="content-item mt-15">
                    <div class="pc-table-wrapper">
                        <div class="table">
                            <div class="table-body">
                                <div class="item-list ti-header">
                                    <div class="t-item">
                                        <div class="td" data-width="10"><span>QN#</span></div>
                                        <div class="td" data-width="8"><span>연식</span></div>
                                        <div class="td" data-width="22"><span>주행거리</span></div>
                                        <div class="td" data-width="10"><span>사고유무</span></div>
                                        <div class="td" data-width="10"><span>신차가격</span></div>
                                        <div class="td" data-width="10"><span>가이드가</span></div>
                                        <div class="td" data-width="10"><span>차량대금</span></div>
                                        <div class="td" data-width="10"><span>판매가</span></div>
                                        <div class="td" data-width="10"><span>손익</span></div>
                                    </div>
                                </div>
                                <div class="item-list ti-standard" id="guide-history">
                                    <div class="t-item">
                                        <div class="td"><span>BC202100043</span></div>
                                        <div class="td"><span>기아</span></div>
                                        <div class="td"><span>K7 (올 뉴 K7 하이브리드(16~19년))</span></div>
                                        <div class="td"><span>가솔린+전기 2400cc (노블레스 스페셜)</span></div>
                                        <div class="td"><span>15,000,000</span></div>
                                        <div class="td"><span>15,000,000</span></div>
                                        <div class="td"><span>14,500,000</span></div>
                                        <div class="td"><span>16,000,000</span></div>
                                        <div class="td"><span>1,500,000</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량 정보</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">브랜드</div>
                        <div class="modal-item_content">
                            <input id="modal_car_manufacturer" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">모델</div>
                        <div class="modal-item_content">
                            <input id="modal_car_model_name"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">세부모델</div>
                        <div class="modal-item_content">
                            <input id="modal_car_model_detail"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">등급</div>
                        <div class="modal-item_content">
                            <input id="modal_car_class_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">트림</div>
                        <div class="modal-item_content">
                            <input id="modal_car_trim_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연식</div>
                        <div class="modal-item_content">
                            <input id="modal_car_maded_in" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연료</div>
                        <div class="modal-item_content">
                            <input id="modal_car_fuel_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">배기량</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_car_displacement" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">cc</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">미션</div>
                        <div class="modal-item_content">
                            <input id="modal_car_motor_type"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">주행거리</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_car_mileage" class="mi_input" type="number">
                            <span class="bb-text">Km</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">사고유무</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_car_accident" id="modal_car_accident">
                                <option value="NONE">무사고</option>
                                <option value="SIMPLE_CHANGE">단순교환</option>
                                <option value="INSURANCE">보험사고</option>
                                <option value="SPECIAL">특수사고(전손/침수)</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">색상</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_car_color" id="modal_car_color">
                                <option th:each="item, stat : ${carColors}" th:value="${item.color}" th:text="${item.color}">무사고</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량번호</div>
                        <div class="modal-item_content">
                            <input id="modal_car_number" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">신차가격(만원)</div>
                        <div class="modal-item_content">
                            <input id="modal_new_car_price" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">주요옵션</div>
                        <div class="modal-item_content">
                            <input id="modal_car_option" class="mi_input" type="text">
                        </div>
                    </div>

                </div>
            </div>


            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">공지사항</span>
                </div>

                <div class="content-item mt-15">
                    <div id="guide_notification" class="note-list">
                        <div class="note-item">
                            <span class="note-date">2021.02.02</span>
                            <span class="note-desc">K7 특수색상 매입 금지</span>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content btn-setting_guide">
                <div class="content-title">
                    <span class="ct-title">가이드</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">엔카</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_enar_id" type="hidden">
                            <input id="modal_price_enar_popular" type="hidden">
                            <input id="modal_price_enar_name" type="hidden">
                            <input id="modal_price_enar" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">KCar</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kcar_id" type="hidden">
                            <input id="modal_price_kcar_popular" type="hidden">
                            <input id="modal_price_kcar_name" type="hidden">
                            <input id="modal_price_kcar" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">KB차차차</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kb_id" type="hidden">
                            <input id="modal_price_kb_popular" type="hidden">
                            <input id="modal_price_kb_name" type="hidden">
                            <input id="modal_price_kb" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">카매니저</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_how_id" type="hidden">
                            <input id="modal_price_how_popular" type="hidden">
                            <input id="modal_price_how_name" type="hidden">
                            <input id="modal_price_how" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>


                </div>

                <div class="content-title">
                    <span class="ct-title">가이드 평균</span>
                </div>
                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">가이드 평균값</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_retail_avg_price" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>
                </div>

                <div class="content-title">
                    <span class="ct-title">경매장가</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">Kcar 경매장</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kcar_biding_id" type="hidden">
                            <input id="modal_price_kcar_biding_popular" type="hidden">
                            <input id="modal_price_kcar_biding_name" type="hidden">
                            <input id="modal_price_kcar_biding" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">Car Auction 경매장</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_car_auction_biding_id" type="hidden">
                            <input id="modal_price_car_auction_biding_popular" type="hidden">
                            <input id="modal_price_car_auction_biding_name" type="hidden">
                            <input id="modal_price_car_auction_biding" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>



                </div>

                <div class="content-title">
                    <span class="ct-title">경매장가 평균</span>
                </div>
                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">경매장가 평균값</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_bid_avg_price" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>
                </div>

            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가이드 제출자 및 상태</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름</div>
                        <div class="modal-item_content">
                            <input id="modal_admin_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_admin_phone" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">가이드 상태</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_guide_status" id="modal_guide_status">
                                <option th:each="item : ${T(com.mobilityk.core.domain.GuideStatus).values()} "
                                        th:value="${item}"
                                        th:text="${item.description}"
                                ></option>
                                <!--
                                <option value="REQUEST">가이드 요청</option>
                                <option value="FINISH">가이드 완료</option>
                                <option value="AUCTION_SUCCESS">경매(낙찰)</option>
                                <option value="AUCTION_FAIL">경매(유찰)</option>
                                <option value="BUY_REQUEST">매입요청</option>
                                <option value="BUY">매입</option>
                                <option value="SELLING">판매중</option>
                                <option value="SELL">매각</option>
                                -->
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량위치</div>
                        <div class="modal-item_content">
                            <input id="modal_guide_car_location"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content content-type02">
                <div class="content-title">
                    <span class="ct-title">가이드 가격</span>
                </div>

                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content">
                            <span id="guide_price" class="total-price">100,000,000 원</span>
                        </div>
                    </div>
                </div>
            </div>


            <div sec:authorize="hasAnyRole('MASTER')" class="modal-content">
                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input  id="modal_guide_price" class="mi_input" type="number" placeholder="가이드 전송 가격을 입력해주세요..">
                            <button id="btnSendGuide"class="mf_button btn-submit hover01">전송</button>
                        </div>
                    </div>
                </div>

                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">차액</div>
                        <div class="modal-item_content flex">
                            <input  id="modal_guide_diff_price" class="mi_input" type="number" placeholder=""
                                    style="color: red;">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">사진</span>
                </div>

                <div class="content-item w100p">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content image-wrapper">
                            <div id="modal_guide_images" class="image-container" name="guide-image">
                                <a href=""  target="_blank">
                                    <div class="image-item"><img src="" alt=""></div>
                                </a>
                            </div>
                            <button id="btnDownAllFile" name="image-down" class="mf_button btn-submit hover01 mt-20">전체 다운</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content">
                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input id="modal_guide_comment_input" class="mi_input" type="text" placeholder="내용을 입력하세요.">
                            <button id="btnSaveComment" class="mf_button btn-submit hover01 ml-10 mr-0">댓글 등록</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div id="modal_guide_comment" class="content-item w100p pb-20">
                    <!--
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">홍길동 이사 <span class="item-date">2021-06-03 10:10</span></div>
                        <div class="modal-item_content">
                            <input class="mi_input" type="text">
                        </div>
                    </div>
                    -->
                </div>
            </div>

            <div class="modal-footer">
                <button id="btnCarInspect" class="mf_button btn-save hover01">차량점검표</button>
                <button sec:authorize="hasAnyRole('MASTER')" id="btnDeleteGuide" class="mf_button btn-save hover01">삭제</button>
                <button id="btnSaveGuide" class="mf_button btn-save hover01">저장</button>
                <button id="btnCloseGuide"class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>


        <div class="modal-wrapper main-modal modal-excel_download width-600">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">엑셀 다운로드</span>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">가이드</a>
                    <a class="bc-item">엑셀 다운로드</a>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title"></span>
                </div>

                <div class="content-item flex-row-2">
                    <div class="modal-check-list">
                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-01">QN#</label>
                                    <input type="checkbox" id="checkall-01" class="check_all" name="checklist-01" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">QN#</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_serial">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-02">차량점검표 작성자</label>
                                    <input type="checkbox" id="checkall-02" class="check_all" name="checklist-02" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-05">이름(관리지점)</label>
                                    <input type="checkbox" id="check-05" class="check_normal" name="checklist-02" value="excel_member_name">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-05">아이디</label>
                                    <input type="checkbox" id="check-05" class="check_normal" name="checklist-02" value="excel_member_emailAddress">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-06">연락처</label>
                                    <input type="checkbox" id="check-06" class="check_normal" name="checklist-02" value="excel_member_phone">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-07">소속/지점</label>
                                    <input type="checkbox" id="check-07" class="check_normal" name="checklist-02" value="excel_member_manage_branch">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-03">차량정보</label>
                                    <input type="checkbox" id="checkall-03" class="check_all" name="checklist-03" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-23">브랜드</label>
                                    <input type="checkbox" id="check-23" class="check_normal" name="checklist-03" value="excel_car_manufacturer">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-24">모델</label>
                                    <input type="checkbox" id="check-24" class="check_normal" name="checklist-03" value="excel_car_model">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-25">세부모델</label>
                                    <input type="checkbox" id="check-25" class="check_normal" name="checklist-03" value="excel_car_model_detail">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-26">등급</label>
                                    <input type="checkbox" id="check-26" class="check_normal" name="checklist-03" value="excel_car_class">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-27">트림</label>
                                    <input type="checkbox" id="check-27" class="check_normal" name="checklist-03" value="excel_car_trim">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-28">연식</label>
                                    <input type="checkbox" id="check-28" class="check_normal" name="checklist-03" value="excel_car_maded_year">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-29">연료</label>
                                    <input type="checkbox" id="check-29" class="check_normal" name="checklist-03" value="excel_fuel_type">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-30">배기량</label>
                                    <input type="checkbox" id="check-30" class="check_normal" name="checklist-03" value="excel_car_displacement">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-31">미션</label>
                                    <input type="checkbox" id="check-31" class="check_normal" name="checklist-03" value="excel_motor_type">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-32">주행거리</label>
                                    <input type="checkbox" id="check-32" class="check_normal" name="checklist-03" value="excel_mileage">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-33">사고유무</label>
                                    <input type="checkbox" id="check-33" class="check_normal" name="checklist-03" value="excel_accident">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-34">색상</label>
                                    <input type="checkbox" id="check-34" class="check_normal" name="checklist-03" value="excel_car_color">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-35">차량번호</label>
                                    <input type="checkbox" id="check-35" class="check_normal" name="checklist-03" value="excel_car_number">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-36">신차가격</label>
                                    <input type="checkbox" id="check-36" class="check_normal" name="checklist-03" value="excel_new_car_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-36">기타사항</label>
                                    <input type="checkbox" id="check-36" class="check_normal" name="checklist-03" value="excel_other">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-36">옵션</label>
                                    <input type="checkbox" id="check-36" class="check_normal" name="checklist-03" value="excel_option">
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="modal-check-list">

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-04">가격</label>
                                    <input type="checkbox" id="checkall-04" class="check_all" name="checklist-04" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">가이드가격</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-04" value="excel_guide_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-39">점검감가액</label>
                                    <input type="checkbox" id="check-39" class="check_normal" name="checklist-04" value="excel_inspect_minus_money">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-40">가이드감가액</label>
                                    <input type="checkbox" id="check-40" class="check_normal" name="checklist-04" value="excel_guide_minus_money">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-41">최종매입가격</label>
                                    <input type="checkbox" id="check-41" class="check_normal" name="checklist-04" value="excel_guide_final_buy_price">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-05">평가사 평가사유</label>
                                    <input type="checkbox" id="checkall-05" class="check_all" name="checklist-05" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">평가사유</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-05" value="excel_inspect_reason">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-06">데미지 체크 세부내역</label>
                                    <input type="checkbox" id="checkall-06" class="check_all" name="checklist-06" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기교환(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_change">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기판금(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_pangum">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기도색(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_dosaek">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">교환요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_change">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">판금요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_pangum">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">도색요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_dosaek">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기타(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_other">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">합계(원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_total">
                                </div>
                            </div>

                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-07">체크리스트</label>
                                    <input type="checkbox" id="checkall-07" class="check_all" name="checklist-07" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">체크리스트 항목</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-07" value="excel_check_list">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">합계(원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-07" value="excel_check_list_total">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">타이어마모 기타사유</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-07" value="excel_tire_wear_reason">
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="btnExcelDown" class="mf_button btn-download hover01">엑셀 다운로드</button>
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

    </div>
</div>

<script>
    let search = "";
    let guideId;
    let baseUri = `/admin/inspect`;

    let guidePrice = 0;

    let guidePriceList = [];
    let guideCommentList = [];
    let inspectCommentList = [];
    let guideAddImgList = [];

    $(function(){
        $('.table-body .ti-standard .t-item').on('click', activeModal_CheckList);
        $('#btnGuideDetail').on('click' , activeModal_GuideDetail);
        search = $('#searchText').val();
        $('#btnSearch').click(function () {
           if(!$('#searchText').val()) {
               Common.goPage(baseUri);
           } else {
               Common.goPage(baseUri + '?search=' + $('#searchText').val());
           }
        });

        $('#searchText').keyup(function (e) {
            if(e.keyCode == 13) {
                if(!$('#searchText').val()) {
                    Common.goPage(baseUri);
                } else {
                    Common.goPage(baseUri+'?search=' + $('#searchText').val());
                }
            }
        });

        $('button[name=image-down]').click(function () {
            Common.goPage('/admin/guide/download/image?guideId=' + $('#modal_guide_id').val());
        });

        $('#btnDeleteInspect').click(function () {
            let result = confirm('차량 점검표를 삭제하시겠습니까?');
            if(result) {
                Service.deleteInspect(guideId, function () {
                    closeLayer();
                    Common.reloadPage();
                });
            }
        });

        $('#btnSendGuide').click(function () {
            let result = confirm('고객에게 가이드를 전송하시겠습니까? 고객에게 카카오 알림톡이 발송됩니다.');
            if(result) {
                let guidePrice = parseInt($('#modal_guide_price').val());
                if(isNaN(guidePrice)) {
                    alert('가이드가격은 숫자만 입력 가능합니다.');
                    return;
                }
                Service.sendGuide(guideId, guidePrice);
            }
        });

        $('#btnSaveInspect').click(function () {
            let newCarPrice = $('#ins_new_car_price').val();
            if(newCarPrice) {
                newCarPrice = newCarPrice.replaceAll(',' , '');
                newCarPrice = newCarPrice.replaceAll('.' , '');
                newCarPrice = newCarPrice * 10000;
            }

            Service.saveInspect(newCarPrice, function () {
                alert('완료되었습니다');
                $('.modal-check_list').removeClass('active');
                Common.reloadPage();
            });
        });

        $('#btnSaveComment').click(function () {
            let comment = $('#modal_guide_comment_input').val();
            if(!comment) {
                alert('댓글을 입력하세요');
                return;
            }
            Service.createGuideComment(guideId, comment);
        });

        $('#btnSaveInsComment').click(function () {
            let comment = $('#insComment').val();
            if(!comment) {
                alert('댓글을 입력하세요.');
                return;
            }

            Service.createInspectComment(guideId, comment, function (item) {
                let commentHtml = "";
                commentHtml += `<div class="modal-item mt-15" comment-id="${item.id}">`;
                commentHtml += `<div class="modal-item_title">${item.member.name}<span class="item-date">${item.createdAt}</span>`;
                commentHtml += `</div>`;
                commentHtml += `<div class="modal-item_content">`;
                commentHtml += `<input class="mi_input" value="${item.body}" type="text" readonly="readonly"> `;
                commentHtml += `</div>`;
                commentHtml += `</div>`;
                $('#ins_guide_comment').append(commentHtml);
            });

        });

        $('#btnCarInspect').click(function () {
            $('#insComment').val('');

            Service.getInspectDetail($('#modal_guide_id').val(), function (guide) {
                setAndShowInspectDetailModal(guide);
            });
        });


        // 체크박스 전체 선택
        $(".checkbox_group").on('click', '.check_all', function() {
            $(this).parents(".checkbox_group").find('input').prop("checked", $(this).is(":checked"));
        });

        // 체크박스 개별 선택
        $(".checkbox_group").on("click", ".check_normal", function() {
            var is_checked = true;
            $(".checkbox_group .check_normal").each(function(){
                is_checked = is_checked && $(this).is(":checked");
            });
        });

        $('#btnExcelDown').click(function () {
            console.log('click excel download');
            let excelDownList = [];

            $('input:checkbox[name=checklist-01]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-02]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-03]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-04]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-05]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-06]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-07]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });
            console.log(excelDownList);
            if(excelDownList.length == 0) {
                alert('항목을 선택해 주세요');
                return;
            }

            let url = `/admin/inspect/excel/download?page=` + $('#page').val() + `&size=`+ $('#size').val();
            url += `&check=${excelDownList}`;
            if($('#search').val()) {
                url += '&search=' + $('#search').val();
            }
            Common.goPage(url);

        });

        $('#modal_guide_price').keyup(function () {
            let diffPrice = Number($(this).val()) - guidePrice;
            $('#modal_guide_diff_price').val(diffPrice);
        });

    });

    function activeModal_ExcelDownload() {
        openLayer();
        $('.modal-excel_download').addClass('active');
    }
    function setAndShowGuideDetailModal(data, dynamicLinkYn) {
        $('#modal_guide_id').val(data.id);
        $('#modal_guide_serial').text(data.serial);

        var manageBranch = "";
        if(data.manageBranch) {
            manageBranch = data.manageBranch;
        }
        $('#modal_writer_name').val(data.memberName + '(' + manageBranch + ')');
        $('#modal_writer_email').val(data.memberEmail);
        $('#modal_writer_phone').val(data.memberPhone);
        $('#modal_writer_phone').val(data.memberPhone);
        $('#modal_writer_group_branch').val(data.memberGroup + "/" + data.memberBranch);
        $('#modal_customer_name').val(data.customerName);
        $('#modal_customer_phone').val(data.customerContact);

        $('#modal_car_manufacturer').val(data.carManufacturer);
        $('#modal_car_model_name').val(data.carModel);
        $('#modal_car_model_detail').val(data.carModelDetail);
        $('#modal_car_class_name').val(data.carClassName);
        $('#modal_car_trim_name').val(data.carTrim);
        $('#modal_car_maded_in').val(data.carMadedYear + "/" + data.carMadedMonth);
        let fuelType = '';
        if(data.fuelType == 'GAS') {
            fuelType = '가솔린';
        } else if(data.fuelType == 'DIESEL') {
            fuelType = '디젤';
        } else if(data.fuelType == 'LPG') {
            fuelType = 'LPG';
        } else if(data.fuelType == 'GAS_LPG') {
            fuelType = '가솔린(LPG겸용)';
        } else if(data.fuelType == 'GAS_CNG') {
            fuelType = '가솔린(CNG겸용)';
        } else if(data.fuelType == 'GAS_HYBRID') {
            fuelType = '가솔린 하이브리드';
        } else if(data.fuelType == 'ELECTRIC') {
            fuelType = '전기';
        } else if(data.fuelType == 'HYDROGEN') {
            fuelType = '수소';
        }
        $('#modal_car_fuel_type').val(fuelType);
        $('#modal_car_displacement').val(data.carDisplacement);
        let motorType='';
        if(data.motorType == 'MANUAL') {
            motorType = "수동";
        } else if(data.motorType == 'AUTOMATIC') {
            motorType = "자동";
        } else if(data.motorType == 'CVT') {
            motorType = "CVT";
        } else if(data.motorType == 'DUAL') {
            motorType = "듀얼클러치";
        }
        $('#modal_car_motor_type').val(motorType);
        $('#modal_car_mileage').val(data.realMileage);

        let accident = '';
        if(data.accident == 'NONE') {
            accident = "무사고";
        } else if(data.accident == 'SIMPLE_CHANGE') {
            accident = "단순교환";
        } else if(data.accident == 'INSURANCE') {
            accident = "보험사고";
        } else if(data.accident == 'SPECIAL') {
            accident = "특수사고(전손/침수)";
        }
        $('#modal_car_accident').val(data.accident);
        $('#modal_car_color').val(data.carColor);
        $('#modal_car_number').val(data.carNumber);

        $('#modal_option_div').empty();
        data.options.forEach(function (item) {
            let html = `<span class="option-item">${item.option}</span>`;
            $('#modal_option_div').append(html);
        });

        let option = '';
        if(data.option1) {
            option += data.option1;
        }
        if(data.option2) {
            option += " " + data.option2;
        }
        if(data.option3) {
            option += " " + data.option3;
        }
        $('#modal_other').val(option);


        $('#modal_guide_status').val(data.guideStatus);
        $('#modal_guide_car_location').val(data.carLocation);

        if(data.priceList){
            guidePriceList = data.priceList;
            updateViewPriceValue();
        }
        if(data.commentList) {
            guideCommentList = data.commentList;
            updateViewGuideCommentList();
        }

        $('#modal_admin_name').val(data.adminName);
        $('#modal_admin_phone').val(data.adminPhone);

        let guidePriceTemp = (data.price / 10000);
        $('#guide_price').text(Common.comma(guidePriceTemp) + ' 만원');

        //$('#guide_price').text(Common.comma(data.price) + ' 원');
        guidePrice = data.price;
        $('#modal_guide_diff_price').val('');
        if(data.sendPrice) {
            $('#modal_guide_price').val(data.sendPrice);
            let diffPrice = data.sendPrice - data.price;
            if(diffPrice) {
                $('#modal_guide_diff_price').val(diffPrice);
            } else {
                console.log('diffPrice : false ' + diffPrice);
                $('#modal_guide_diff_price').val('');
            }
        } else {
            $('#modal_guide_price').val(data.price);
        }


        $('#modal_retail_avg_price').val(data.retailAvgPrice);
        $('#modal_bid_avg_price').val(data.bidAvgPrice);

        if(data.additionalImages) {
            guideAddImgList = data.additionalImages;
            updateViewGuideImgList();
        }

        $('#guide-history').empty();
        data.guideHistory.forEach(function (item) {
            let sellPrice = item.sellPrice;
            let finalBuyPrice = item.finalBuyPrice;
            let newCarPrice = item.newCarPrice;
            if(!sellPrice) { sellPrice = 0; }
            if(!finalBuyPrice) { finalBuyPrice = 0; }
            if(!newCarPrice) { newCarPrice = 0; }
            let notiHtml = ``;
            notiHtml += `<div class="t-item">`;
            notiHtml += `<div class="td"><span>${item.serial}</span></div>`;
            notiHtml += `<div class="td"><span>${item.carMadedYear} / ${item.carMadedMonth}</span></div>`;
            notiHtml += `<div class="td"><span>${item.mileage}</span></div>`;
            notiHtml += `<div class="td"><span>${item.accidentStr}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(newCarPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(item.sendPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(finalBuyPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(sellPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma((sellPrice - finalBuyPrice) / 10000)}</span></div>`;
            notiHtml += `</div>`;
            $('#guide-history').append(notiHtml);
        });
        AutoTableSetting();

        $('#guide_notification').empty();
        data.guideNotificationList.forEach(function (item) {
            let html = ``;
            html += `<div class="note-item">`;
            html += `<span class="note-date">${item.createdAtStr}</span>`;
            html += `<span class="note-desc">${item.body}</span>`;
            html += `</div>`;
            $('#guide_notification').append(html);
        });

        $('#modal_new_car_price').val(data.newCarPrice / 10000);

        openLayer();
        $('.modal-check_list').removeClass('active');
        $('.modal-guide_detail').addClass('active');
        if(dynamicLinkYn) {
            activeModal_GuidePrice();
        }
    }
    function activeModal_GuideDetail(){
        Service.getGuideDetail(guideId, function (data) {
            setAndShowGuideDetailModal(data, false);
        });
    }

    function updateViewPriceValue() {
        $('#modal_price_enar').val(0);
        $('#modal_price_kcar').val(0);
        $('#modal_price_kb').val(0);
        $('#modal_price_how').val(0);
        $('#modal_price_kcar_biding').val(0);
        $('#modal_price_car_auction_biding').val(0);

        let guideCount = 0;
        for (let i = 0; i < guidePriceList.length; i++) {
            let inner = guidePriceList[i];
            let price = Common.comma(inner.price);

            if(inner.marketName == 'SK엔카') {
                $('#modal_price_enar').val(price);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketName == 'KCar') {
                $('#modal_price_kcar').val(price);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketName == 'KB차차차') {
                $('#modal_price_kb').val(price);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketName == '하우머치') {
                $('#modal_price_how').val(price);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketName == 'KCar 경매장') {
                $('#modal_price_kcar_biding').val(price);
            } else if(inner.marketName == 'Car auction 경매장') {
                $('#modal_price_car_auction_biding').val(price);
            }
        }

        $('#btnSendGuide').addClass('gone');
        if(guideCount >= 3) {
            // 가이드 설정이 되어 있으면 전송버튼 활성
            $('#btnSendGuide').removeClass('gone');
        }
    }

    function updateViewGuideCommentList() {
        $('#modal_guide_comment').empty();
        $('#modal_guide_comment_2').empty();
        guideCommentList.forEach(function (item) {
            let commentHtml = "";
            commentHtml += `<div class="modal-item mt-15" comment-id="${item.id}">`;
            commentHtml += `<div class="modal-item_title">${item.member.name}<span class="item-date">${item.createdAt}</span>`;
            commentHtml += `</div>`;
            commentHtml += `<div class="modal-item_content">`;
            commentHtml += `<input class="mi_input" value="${item.body}" type="text" readonly="readonly"> `;
            commentHtml += `</div>`;
            commentHtml += `</div>`;
            $('#modal_guide_comment').append(commentHtml);
            $('#modal_guide_comment_2').append(commentHtml);
        });
    }
    
    function setAndShowInspectDetailModal(guide) {
        $('#ins_serial').text("차량점검표 QN# (" + guide.serial + ")");

        $('#ins_name').val(guide.memberName +"(" + guide.memberManageBranch + ")");
        $('#ins_email_address').val(guide.memberEmail);
        $('#ins_member_phone').val(guide.memberPhone);
        $('#ins_member_group').val(guide.memberGroup + "/" + guide.memberBranch);
        $('#ins_car_manufacturer').val(guide.carManufacturer);
        $('#ins_car_model').val(guide.carModel);
        $('#ins_car_model_detail').val(guide.carModelDetail);
        $('#ins_car_class').val(guide.carClassName);
        $('#ins_car_trim').val(guide.carTrim);
        $('#ins_car_made').val(guide.carMadedYear + "/" + guide.carMadedMonth);
        let fuelType = '';
        if(guide.fuelType == 'GAS') {
            fuelType = '가솔린';
        } else if(guide.fuelType == 'DIESEL') {
            fuelType = '디젤';
        } else if(guide.fuelType == 'LPG') {
            fuelType = 'LPG';
        } else if(guide.fuelType == 'GAS_LPG') {
            fuelType = '가솔린(LPG겸용)';
        } else if(guide.fuelType == 'GAS_CNG') {
            fuelType = '가솔린(CNG겸용)';
        } else if(guide.fuelType == 'GAS_HYBRID') {
            fuelType = '가솔린 하이브리드';
        } else if(guide.fuelType == 'ELECTRIC') {
            fuelType = '전기';
        } else if(guide.fuelType == 'HYDROGEN') {
            fuelType = '수소';
        }
        $('#ins_fuel_type').val(fuelType);
        $('#ins_car_displacement').val(guide.carDisplacement);
        let motorType='';
        if(guide.motorType == 'MANUAL') {
            motorType = "수동";
        } else if(guide.motorType == 'AUTOMATIC') {
            motorType = "자동";
        } else if(guide.motorType == 'CVT') {
            motorType = "CVT";
        } else if(guide.motorType == 'DUAL') {
            motorType = "듀얼클러치";
        }
        $('#ins_motor_type').val(motorType);
        $('#ins_mileage').val(guide.mileage);
        let accident = '';
        if(guide.accident == 'NONE') {
            accident = "무사고";
        } else if(guide.accident == 'SIMPLE_CHANGE') {
            accident = "단순교환";
        } else if(guide.accident == 'INSURANCE') {
            accident = "보험사고";
        } else if(guide.accident == 'SPECIAL') {
            accident = "특수사고(전손/침수)";
        }
        $('#ins_accident').val(accident);
        $('#ins_car_color').val(guide.carColor);
        $('#ins_car_number').val(guide.carNumber);
        let option = '';
        if(guide.option1) {
            option += guide.option1;
        }
        $('#modal_car_option1').val(option);
        option = '';
        if(guide.option2) {
            option = guide.option2;
        }
        $('#modal_car_option2').val(option);
        option = '';
        if(guide.option3) {
            option = guide.option3;
        }
        $('#ins_option').val(option);

        $('#ins_option_div').empty();
        guide.options.forEach(function (item) {
            let span = `<span class="option-item">${item.option}</span>`;
            $('#ins_option_div').append(span);
        });

        $('#ins_gi_gyohwan_cnt').text(guide.damageGiGyohwanCnt);
        $('#ins_gi_gyohwan_price').text(guide.damageGiGyohwanPrice);

        $('#ins_gi_pangum_cnt').text(guide.damageGiPangumCnt);
        $('#ins_gi_pangum_price').text(guide.damageGiPangumPrice);

        $('#ins_gi_dosaek_cnt').text(guide.damageGiDosaekCnt);
        $('#ins_gi_dosaek_price').text(guide.damageGiDosaekPrice);

        $('#ins_need_gyohwan_cnt').text(guide.damageNeedGyohwanCnt);
        $('#ins_need_gyohwan_price').text(guide.damageNeedGyohwanPrice);

        $('#ins_need_pangum_cnt').text(guide.damageNeedPangumCnt);
        $('#ins_need_pangum_price').text(guide.damageNeedPangumPrice);

        $('#ins_need_dosaek_cnt').text(guide.damageNeedDosaekCnt);
        $('#ins_need_dosaek_price').text(guide.damageNeedDosaekPrice);

        $('#ins_other_cnt').text(guide.damageOtherCnt);
        $('#ins_other_price').text(guide.damageOtherPrice);

        $('#ins_new_car_price').val(guide.newCarPrice / 10000);

        if(guide.inspectTopImgUrl) {
            $('#ins_damage_top_img_url').attr('src' , guide.inspectTopImgUrl);
            $('#ins_damage_top_img_url_a').attr('href' , guide.inspectTopImgUrl);
        }
        if(guide.inspectSideImgUrl) {
            $('#ins_damage_side_img_url').attr('src' , guide.inspectSideImgUrl);
            $('#ins_damage_side_img_url_a').attr('href' , guide.inspectSideImgUrl);
        }
        if(guide.inspectBottomImgUrl) {
            $('#ins_damage_bottom_img_url').attr('src' , guide.inspectBottomImgUrl);
            $('#ins_damage_bottom_img_url_a').attr('href' , guide.inspectBottomImgUrl);
        }

        //$('#ins_guide_price').val(Common.comma(Math.round(guide.price / 1000) / 10));
        // 차량 점검표의 가이드 가격은 전송가격이 나와야 함
        if(guide.sendPrice) {
            $('#ins_guide_price').val(Common.comma(Math.round(guide.sendPrice / 1000) / 10));
        } else {
            $('#ins_guide_price').val(0);
        }

        $('#ins_damage_minus_price').val(Common.comma(Math.round(guide.damageMinusPrice / 1000) / 10));
        $('#ins_check_minus_price').val(Common.comma(Math.round(guide.checkMinusPrice / 1000) / 10));
        $('#ins_evaluator_minus_price').val(Common.comma(Math.round(guide.evaluatorMinusPrice / 1000) / 10));

        $('#ins_evaluator_minus_reason').val(guide.evaluatorMinusReason);

        let totalCheckListPrice = 0;
        $('.checked-item-list').empty();
        let checkHtml = ``;
        guide.checkList.forEach(function (item) {
            totalCheckListPrice += item.price;
            checkHtml += `<div class="checked-item">`;
            checkHtml += `<p class="ci-tit">${item.question}</p>`;
            checkHtml += `<p class="ci-price">${item.price} 원</p>`;
            checkHtml += `</div>`;
        });
        if(guide.tireWearType) {
            checkHtml += `<div class="checked-item">`;
            if(guide.tireWearType == 'EA_0') {
                checkHtml += `<p class="ci-tit">타이어 마모 [0 EA]</p>`;
            } else if(guide.tireWearType == 'EA_1') {
                checkHtml += `<p class="ci-tit">타이어 마모 [1 EA]</p>`;
            } else if(guide.tireWearType == 'EA_2') {
                checkHtml += `<p class="ci-tit">타이어 마모 [2 EA]</p>`;
            } else if(guide.tireWearType == 'EA_3') {
                checkHtml += `<p class="ci-tit">타이어 마모 [3 EA]</p>`;
            } else if(guide.tireWearType == 'EA_4') {
                checkHtml += `<p class="ci-tit">타이어 마모 [4 EA]</p>`;
            } else if(guide.tireWearType == 'OTHER') {
                checkHtml += `<p class="ci-tit">타이어 마모 [기타]</p>`;
            }
            checkHtml += `<p class="ci-price">${guide.tireWearPrice} 원</p>`;
            checkHtml += `</div>`;
        }

        $('.checked-item-list').append(checkHtml);

        $('#ins_check_list_total').val(totalCheckListPrice);
        $('#ins_tire_wear_reason').val(guide.tireWearReason);

        $('#ins_final_minus_price').val(guide.finalMinusPrice);
        $('#ins_loss_price').val(guide.lossPrice);
        if(guide.finalBuyPrice) {
            $('#ins_final_buy_price').text(Common.comma(Math.round(guide.finalBuyPrice / 1000) / 10));
        } else {
            $('#ins_final_buy_price').text('');
        }

        $('#ins_guide_comment').empty();
        guide.inspectCommentList.forEach(function (item) {
            let commentHtml = "";
            commentHtml += `<div class="modal-item mt-15" comment-id="${item.id}">`;
            commentHtml += `<div class="modal-item_title">${item.member.name}<span class="item-date">${item.createdAt}</span>`;
            commentHtml += `</div>`;
            commentHtml += `<div class="modal-item_content">`;
            commentHtml += `<input class="mi_input" value="${item.body}" type="text" readonly="readonly"> `;
            commentHtml += `</div>`;
            commentHtml += `</div>`;
            $('#ins_guide_comment').append(commentHtml);
        });

        if(guide.additionalImages) {
            guideAddImgList = guide.additionalImages;
            updateViewGuideImgList();
        }

        openLayer();

        $('.modal-guide_detail').removeClass('active');
        $('.modal-check_list').addClass('active');
    }
    
    function activeModal_CheckList(){
        guideId = $(this).attr('id');
        $('#insComment').val('');
        $('#modal_guide_id').val($(this).attr('id'));

        Service.getInspectDetail($(this).attr('id'), function (guide) {
            setAndShowInspectDetailModal(guide);
        });
    }

    function updateViewGuideImgList() {
        $('div[name=guide-image]').empty();
        guideAddImgList.forEach(function (item) {
            if(item.imgUrl) {
                let commentHtml = "";
                commentHtml += `<a href="${item.imgUrl}" target="_blank">`;
                commentHtml += `<div class="image-item"><img style="width: 130px; height: 130px;" src="${item.imgUrl}" alt=""></div>`;
                commentHtml += `</a>`;
                $('div[name=guide-image]').append(commentHtml);
            }
        });
    }

    function searchValue(size) {
        let url = `/admin/inspect?page=0&size=`+ size;
        if($('#search').val()) {
            url += '&search=' + $('#search').val();
        }
        Common.goPage(url);
    }
    let Service = {
        saveInspect : function (newCarPrice, _func) {
            var url = "/api/admin/v1/guide/" + guideId + "/inspect";
            let updateObj = {};
            updateObj.newCarPrice = newCarPrice;
            var ajaxParam = {
                "url": url,
                "type": "PUT",
                "data": JSON.stringify(updateObj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createGuideComment: function (guideId, comment) {
            var url = "/api/admin/v1/guide/" + guideId + "/comment";
            let updateObj = {};
            updateObj.commentType = 'GUIDE';
            updateObj.body = comment;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(updateObj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    $('#modal_guide_comment_input').val('');
                    let newComment = data.data;
                    guideCommentList.push(newComment);
                    updateViewGuideCommentList();
                    return;
                }
                return;
            });
        },
        sendGuide: function (guideId, guidePrice) {
            var url = "/api/admin/v1/guide/" + guideId + "/send";
            let updateObj = {};
            updateObj.price = guidePrice;
            var ajaxParam = {
                "url": url,
                "type": "PUT",
                "data": JSON.stringify(updateObj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    alert(data.message);
                    return;
                }
                return;
            });
        },
        getGuideDetail: function (guideId, _func) {
            var url = "/api/admin/v1/guide/" + guideId;
            let ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteInspect: function (guideId, _func) {
            let url = "/api/admin/v1/guide/" + guideId + "/inspect";
            let ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createInspectComment: function (guideId, comment, _func) {
            var url = "/api/admin/v1/guide/" + guideId + "/comment";
            let commentObj = {};
            commentObj.commentType = 'INSPECT';
            commentObj.body = comment;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(commentObj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getInspectDetail: function (guideId, _func) {
            var url = "/api/admin/v1/guide/" + guideId + "/inspect";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteGuide: function (guideId, _func) {
            var url = "/api/admin/v1/guide/" + guideId;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    alert(data.message);
                    _func();
                    return;
                }
                return;
            });
        },
    }

</script>