<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <th:block th:insert="~{layout/common :: head}"></th:block>
    </head>
<style>
    @media screen and (max-width: 680px) {
    }
.gone { visibility: hidden; }
</style>

<div class="wrap" id="a10">
    <!-- 오버레이 처리 -->
    <div id="overlay"></div>

    <!-- 컨테이너 -->
    <div id="container">
        <!-- 내비게이션 바 -->
        <th:block th:insert="~{layout/common :: navbar}"></th:block>
    
        <!-- 메인 -->
        <div id="main">

            <div id="loading"><div class="round spinner"></div></div>

            <!-- 헤더 -->
            <th:block th:insert="~{layout/common :: header}"></th:block>
    
            <!-- 바디 -->
            <div id="body">
                <!-- 콘텐트 -->
                <div class="content-wrapper">
                    <!-- 콘텐트 헤더 -->
                    <div class="content-header">
                        <div class="content-title">

                            <span class="ct-text">매입매출 <span th:text="${#numbers.formatInteger(page.totalElements , 0 , 'COMMA')}" class="search-count">999,999,999</span>건이 검색되었습니다.</span>

                            <input type="hidden" id="guideId" value=""/>
                        </div>
                        <div class="breadcrumb">
                            <a th:href="@{/}" class="bc-item">Home</a>
                            <a class="bc-item">매입매출</a>
                            <input type="hidden" id="buy_and_sell_id"  />
                        </div>
                    </div>
                    <!-- 콘텐트 바디 -->
                    <div class="content-body width-1920">
                        <!-- 테이블 아이템 01 -->
                        <div class="content-item">
                            <div class="content-item-header flex-column">
                                <div class="header-option mf">
                                    <div class="search-option mb-10">
                                        <span class="option-title">차량번호</span>
                                        <input th:value="${car_number}" id="s_car_number"class="so_input" type="text" placeholder="차량번호 입력하세요.">
                                    </div>
                                    <div class="search-option mb-10">
                                        <span class="option-title">차량 모델</span>
                                        <input th:value="${car_model}" id="s_car_model"class="so_input" type="text" placeholder="차량 모델을 입력하세요.">
                                    </div>
                                    <div class="search-option mb-10">
                                        <span class="option-title">담당 딜러</span>
                                        <input th:value="${dealer_name}" id="s_dealer_name"class="so_input" type="text" placeholder="담당 딜러를 입력하세요.">
                                    </div>

                                    <div class="etc-option toggle-target">
                                        <div class="eo-icon hover01"><i class="xi-ellipsis-h"></i></div>
                                        <div class="eo-menus">
                                            <div onclick="javascript:activeModal_ExcelDownload(); return false;" class="btn-download_excel">엑셀 다운로드</div>
                                            <div id="btn-modal1" class="btn-modal">매입원가</div>
                                            <div id="btn-modal2" class="btn-modal">상품화비용</div>
                                            <div id="btn-modal3" class="btn-modal">경매비용</div>
                                            <div id="btn-modal4" class="btn-modal">소매비용</div>
                                            <div class="view-option">
                                                <div id="btn-modal5" class="btn-modal">매입구분</div>
                                                <div id="btn-modal6" class="btn-modal">신차딜러(위치)</div>
                                                <div id="btn-modal7" class="btn-modal">신차딜러(이름)</div>
                                            </div>

                                            <div id="btn-modal8" class="btn-modal">차량위치</div>
                                            <div id="btn-modal9" class="btn-modal">매출처</div>
                                            <div id="btn-modal10" class="btn-modal">실판매자</div>
                                            <div class="view-option">
                                                <div class="vo-item toggle-select"onclick="javascript:searchValue(15); return false;">15개씩 보기</div>
                                                <div class="vo-item toggle-select" onclick="javascript:searchValue(30); return false;">30개씩 보기</div>
                                                <div class="vo-item toggle-select" onclick="javascript:searchValue(60); return false;">60개씩 보기</div>
                                                <div class="vo-item toggle-select" onclick="javascript:searchValue(120); return false;">120개씩 보기</div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="header-option mf">
                                    <div class="date-option">
                                        <span class="option-title">매입일</span>
                                        <div class="parent-datepicker">
                                            <input th:value="${started_at}" id="s_started_at" type="text" class="datepicker" >
                                        </div>
                                        <span class="do-span">~</span>
                                        <div class="parent-datepicker">
                                            <input th:value="${ended_at}" id="s_ended_at"type="text" class="datepicker" >
                                        </div>
                                    </div>
                                    <div class="date-option">
                                        <span class="option-title">낙찰일</span>
                                        <div class="parent-datepicker">
                                            <input th:value="${success_started_at}" id="s_success_started_at" type="text" class="datepicker" >
                                        </div>
                                        <span class="do-span">~</span>
                                        <div class="parent-datepicker">
                                            <input th:value="${success_ended_at}" id="s_success_ended_at"type="text" class="datepicker" >
                                        </div>
                                        <button id="btnSearch" class="ho_button btn-search hover01 ml-10">검색</button>
                                    </div>
                                </div>
                            </div>
                            <div class="content-item-body">
                                <div>
                                    <span> 재고평균 : </span><span th:text="${#numbers.formatInteger(stockDuration_avg, 0 , 'COMMA')}"></span>
                                    <span> 차량대금평균 : </span><span th:text="${#numbers.formatInteger(carPriceTb_avg, 0 , 'COMMA')}"></span>
                                    <span> 매입원가평균 : </span><span th:text="${#numbers.formatInteger(buyTotalPrice_avg, 0 , 'COMMA')}"></span>
                                    <span> 매출원가평균 : </span><span th:text="${#numbers.formatInteger(sellTotalPrice_avg, 0 , 'COMMA')}"></span>
                                    <span> 판매가평균 : </span><span th:text="${#numbers.formatInteger(bidSuccessPriceTb_avg, 0 , 'COMMA')}"></span>
                                    <span> 이익평균 : </span><span th:text="${#numbers.formatInteger(sellRevenue_avg , 0 , 'COMMA')}"></span>
                                </div>
                                <div class="table-wrapper">
                                    <div class="table overflow-scroll">
                                        <div class="table-body">
                                            <div class="item-list ti-header">
                                                <div id="tb-header" class="t-item">
                                                    <div id="sortId" data-sort="id" th:classappend="${page.direction == 'DESC' and page.sort == 'id' ? 'active' : ''}" class="td center-align toggle-target sort" data-width="4">번호<button class="button-sort"></button></span></div>
                                                    <div id="sortBuyDate" data-sort="buyDate" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="5">매입일
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortSellDate" data-sort="sellDate" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="5">매도일
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortStockDuration" data-sort="buyDate" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="5">재고기간
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarLocation" data-sort="carLocation" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="5">현재위치
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarManufacturer" data-sort="carManufacturer" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="5">브랜드
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarModel" data-sort="carModel" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="15">모델(세부모델)
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarTrim" data-sort="carTrim" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="15">등급(트림)
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarNumber" data-sort="carNumber" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target sort" data-width="6">차량번호
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortCarPrice" data-sort="carPrice" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="6">차량대금
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortBuyTotalPrice" data-sort="buyTotalPrice" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="6">매입원가계
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortSellTotalPrice" data-sort="sellTotalPrice" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="6">매출원가계
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortBidSuccessPrice" data-sort="bidSuccessPrice" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="6">판매가계
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortSellRevenue" data-sort="sellRevenue" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="6">이익
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                    <div id="sortGuideStatus" data-sort="guideStatus" th:classappend="${page.direction == 'DESC' ? 'active' : ''}"
                                                         class="td center-align toggle-target" data-width="5">상태
                                                        <button class="button-sort"></button></span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="item-list ti-standard">
                                                <div th:each="item, stat : ${content}" th:id="${item.id}" class="t-item">
                                                    <div th:text="${item.id}" class="td center-align"></div>
                                                    <div th:text="${#temporals.format(item.buyDate, 'yyyy-MM-dd')}"class="td center-align"></div>
                                                    <div th:text="${#temporals.format(item.depositedAt, 'yyyy-MM-dd')}"class="td center-align"></div>
                                                    <div th:text="${item.stockDuration}" class="td center-align">23</div>
                                                    <div th:text="${item.carLocation}"class="td center-align">위치명</div>
                                                    <div th:text="${item.guide.carManufacturer}"class="td center-align">현대</div>
                                                    <div th:text="${item.guide.carModel + ' ' + item.guide.carModelDetail}" class="td center-align">아반떼 (아반떼 AD(15년~18년))</div>
                                                    <div th:text="${item.guide.carClassName + ' ' + item.guide.carTrim}" class="td center-align">가솔린 1600cc (1.6 GDI 밸류 플러스)</div>
                                                    <div th:text="${item.modifyCarNumberTb}" class="td center-align">123가1234</div>
                                                    <div th:text="${#numbers.formatInteger(item.carPrice , 0 , 'COMMA')}" class="td center-align">10,000,000</div>
                                                    <div th:text="${#numbers.formatInteger(item.buyTotalPrice , 0 , 'COMMA')}" class="td center-align">10,000,000</div>
                                                    <div th:text="${#numbers.formatInteger(item.sellTotalPrice , 0 , 'COMMA')}" class="td center-align">10,000,000</div>
                                                    <div th:text="${#numbers.formatInteger(item.bidSuccessPrice , 0 , 'COMMA')}" class="td center-align">10,000,000</div>
                                                    <th:block th:if="${item.sellRevenue == 0}">
                                                        <div  class="td center-align">-</div>
                                                    </th:block>
                                                    <th:block th:if="${item.sellRevenue != 0}">
                                                        <div th:text="${#numbers.formatInteger(item.sellRevenue , 0 , 'COMMA')}" class="td center-align">10,000,000</div>
                                                    </th:block>
                                                    <!--
                                                    <div th:text="${item.guide.guideStatusStr}" class="td center-align bg-color-01">판매중</div>
                                                    -->
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'REQUEST')}" class="td center-align guide-color-01">가이드 요청</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'FINISH')}" class="td center-align guide-color-02">가이드 완료</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'BUY_REQUEST')}" class="td center-align guide-color-03">매입요청</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'BUY')}" class="td center-align guide-color-04">매입</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'AUCTION_SUCCESS')}" class="td center-align guide-color-02">경매(낙찰)</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'AUCTION_FAIL')}" class="td center-align guide-color-05">경매(유찰)</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'WAIT_FOR_MAX')}" class="td center-align guide-color-06">최고가대기</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'WAIT_FOR_SECOND')}" class="td center-align guide-color-06">2등대기</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'SELLING')}" class="td center-align guide-color-01">판매중</div>
                                                    <div th:if="${#strings.equals(item.guide.guideStatus, 'SELL')}" class="td center-align guide-color-03">매각</div>




                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="hidden" id="page" th:value="${page.page}">
                                    <input type="hidden" id="size" th:value="${page.size}">
                                    <input type="hidden" id="sort" th:value="${page.sort}">
                                    <input type="hidden" id="direction" th:value="${page.direction}">
                                    <input type="hidden" id="search" th:value="${search}">
                                    <div th:if="${page.totalPages > 0}" class="table-pagination">
                                        <!--
                                        <a th:if="${page.page != 1}" th:href="@{/admin/member(page=${page.page - 1}, size=${page.size})}"
                                           class="tp-first"><img th:src="@{/assets/img/icon-arrow_left2.png}"  alt=""></a>
                                        -->

                                        <a class="tp-prev"
                                           th:if="${page.isFirst == false}"
                                           th:onclick="'javascript:goAnotherPage('+${page.page - 1}+','+${page.size}+');'"
                                        >
                                        <img th:src="@{/assets/img/icon-arrow_left.png}"  alt=""></i></a>

                                        <div class="tp-nav">
                                            <a th:each="item, stat : ${ #numbers.sequence(page.startPage, page.endPage)}"
                                               th:classappend="${item == page.page+1 ? 'active' : ''}"
                                               th:onclick="'javascript:goAnotherPage('+${item - 1}+','+${page.size}+');'"
                                               th:text="${item}"
                                               class="pg_num">1</a>
                                        </div>
                                        <a th:if="${page.isLast == false}"
                                           th:onclick="'javascript:goAnotherPage('+${page.page + 1}+','+${page.size}+');'"
                                           class="tp-next"><img th:src="@{/assets/img/icon-arrow_right.png}" alt=""></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- 푸터 -->
            <th:block th:insert="~{layout/common :: footer}"></th:block>
        </div>
    </div>

    <!-- 팝업 -->
    <div class="modal">

        <div class="modal-wrapper main-modal modal-check_list width-800">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">차량점검표 QN# (BC20210500002)</span>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">차량점검표</a>
                    <a class="bc-item">상세</a>
                </div>
            </div>
            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량점검표 작성자</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름(관리지점)</div>
                        <div class="modal-item_content">
                            <input id="ins_name" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">아이디</div>
                        <div class="modal-item_content">
                            <input id="ins_email_address" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="ins_member_phone" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">소속/지점</div>
                        <div class="modal-item_content">
                            <input id="ins_member_group" class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량 정보</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">브랜드</div>
                        <div class="modal-item_content">
                            <input id="ins_car_manufacturer"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">모델</div>
                        <div class="modal-item_content">
                            <input id="ins_car_model"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">세부모델</div>
                        <div class="modal-item_content">
                            <input id="ins_car_model_detail"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">등급</div>
                        <div class="modal-item_content">
                            <input id="ins_car_class"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">트림</div>
                        <div class="modal-item_content">
                            <input id="ins_car_trim"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연식</div>
                        <div class="modal-item_content">
                            <input id="ins_car_made"class="mi_input" type="text"  readonly>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연료</div>
                        <div class="modal-item_content">
                            <input id="ins_fuel_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">배기량</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_car_displacement" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">cc</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">미션</div>
                        <div class="modal-item_content">
                            <input id="ins_motor_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">주행거리</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_mileage"class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">Km</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">사고유무</div>
                        <div class="modal-item_content">
                            <input id="ins_accident"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">색상</div>
                        <div class="modal-item_content">
                            <input id="ins_car_color"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량번호</div>
                        <div class="modal-item_content">
                            <input id="ins_car_number" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">신차 가격(원)</div>
                        <div class="modal-item_content">
                            <input id="ins_new_car_price" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">기타 사항</div>
                        <div class="modal-item_content">
                            <input id="ins_other" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">옵션</div>
                        <div class="modal-item_content">
                            <div id="ins_option_div" class="option-list">
                                <span class="option-item">파노라마 썬루프</span>
                                <span class="option-item">AUX</span>
                                <span class="option-item">등등</span>
                            </div>
                        </div>
                    </div>

                    <div class="modal-item width-50p">
                        <div class="modal-item_title">주요옵션</div>
                        <div class="modal-item_content">
                            <input id="ins_option" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가격</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">가이드 가격</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_guide_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">데미지체크 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_damage_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">체크리스트 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_check_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">평가사 감가액</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_evaluator_minus_price" class="mi_input btn-setting_price" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">평가사 평가사유</span>
                </div>

                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">평가사유</div>
                        <div class="modal-item_content">
                            <input id="ins_evaluator_minus_reason" class="mi_input" type="text" placeholder="평가사유를 입력해주세요.">
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content content-type02">
                <div class="content-title">
                    <span class="ct-title">최종 매입 가격</span>
                </div>

                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content">
                            <span id="ins_final_buy_price" class="total-price"></span><span> 만원</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">데미지 체크</span>
                </div>

                <div class="content-item w100p pb-10">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content border-none">
                            <div class="damage-check-container">
                                <div class="dc-image">
                                    <div class="image-side"><img id="ins_damage_top_img_url" th:src="@{/assets/img/img-car_side.png}"  alt=""></div>
                                    <div class="image-top"><img id="ins_damage_side_img_url" th:src="@{/assets/img/img-car_top.png}" src="./assets/img/img-car_top.png" alt=""></div>
                                    <div class="image-under"><img id="ins_damage_bottom_img_url" th:src="@{/assets/img/img-car_under.png}" src="./assets/img/img-car_under.png" alt=""></div>
                                </div>
                                <div class="dc-ref mt-25 mb-25">
                                    <div class="marking-item">
                                        <span class="marker">A</span>
                                        <span class="mi-desc">기교환</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">B</span>
                                        <span class="mi-desc">기판금</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">C</span>
                                        <span class="mi-desc">기도색</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">D</span>
                                        <span class="mi-desc">교환요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">E</span>
                                        <span class="mi-desc">판금요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">F</span>
                                        <span class="mi-desc">도색요망</span>
                                    </div>
                                    <div class="marking-item">
                                        <span class="marker">G</span>
                                        <span class="mi-desc">기타</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">데미지 체크 세부 내역</span>
                </div>

                <div class="content-item flex-row-3 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">기교환 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_gyohwan_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_gyohwan_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기판금 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_pangum_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_pangum_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기도색 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_gi_dosaek_cnt" class="ci-count">3 판</span>
                            <span id="ins_gi_dosaek_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">교환요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_gyohwan_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_gyohwan_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">판금요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_pangum_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_pangum_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">도색요망 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_need_dosaek_cnt" class="ci-count">3 판</span>
                            <span id="ins_need_dosaek_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">기타 (판수/원)</div>
                        <div class="modal-item_content">
                            <span id="ins_other_cnt" class="ci-count">3 판</span>
                            <span id="ins_other_price" class="ci-price">600,000 원</span>
                        </div>
                    </div>

                </div>
            </div>


            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">체크리스트</span>
                </div>

                <div class="content-item mt-15">
                    <div class="modal-item width-40p">
                        <div class="modal-item_title">체크리스트 합계</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_check_list_total" class="mi_input" type="text">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="checked-item-list">
                        <div class="checked-item">
                            <p class="ci-tit">차량 내부 크리닝 필요</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">로커암 개스킷 누유</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">타이어 마모 [3 EA]</p>
                            <p class="ci-price">300,000 원</p>
                        </div>
                        <div class="checked-item">
                            <p class="ci-tit">타이어 마모 [기타]</p>
                            <p class="ci-price">800,000 원</p>
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">타이어마모 기타 사유</div>
                        <div class="modal-item_content border-box">
                            <input id="ins_tire_wear_reason"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">사진</span>
                </div>

                <div class="content-item w100p">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content image-wrapper">
                            <div id="modal_guide_images" name="guide-image" class="image-container">

                            </div>
                            <button name="image-down" class="mf_button btn-submit hover01 mt-20">전체 다운</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input id="insComment" class="mi_input" type="text" placeholder="내용을 입력하세요.">
                            <button id="btnSaveInsComment"class="mf_button btn-submit hover01 ml-10 mr-0">댓글 등록</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div id="ins_guide_comment" class="content-item w100p pb-20">
                    <!--
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">홍길동 이사 <span class="item-date">2021-06-03 10:10</span></div>
                        <div class="modal-item_content">
                            <input class="mi_input" type="text">
                        </div>
                    </div>
                    -->
                </div>
            </div>

            <div class="modal-footer">
                <button  class="mf_button btn-guide hover01">가이드</button>
                <button id="btnDeleteInspect"class="mf_button btn-submit hover01">삭제</button>
                <button class="mf_button btn-save hover01">저장</button>
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <div class="modal-wrapper main-modal modal-guide_detail width-800">
            <div class="modal-header">
                <div class="modal-title">
                    <span id="modal_guide_serial" class="mt-text">가이드 QN# (BC20210500002)</span>
                    <input type="hidden" id="modal_guide_id"/>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">가이드</a>
                    <a class="bc-item">가이드 상세</a>
                </div>
            </div>
            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">고객 담당자</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름(관리지점)</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">아이디</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_email" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_phone" class="mi_input" type="text">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">소속/지점</div>
                        <div class="modal-item_content">
                            <input id="modal_writer_group_branch"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">고객 정보</span>
                </div>

                <div class="content-item flex-row-2 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">고객명</div>
                        <div class="modal-item_content">
                            <input id="modal_customer_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">고객연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_customer_phone" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가이드 이력</span>
                </div>

                <div class="content-item mt-15">
                    <div class="pc-table-wrapper">
                        <div class="table">
                            <div class="table-body">
                                <div class="item-list ti-header">
                                    <div class="t-item">
                                        <div class="td" data-width="10"><span>QN#</span></div>
                                        <div class="td" data-width="8"><span>연식</span></div>
                                        <div class="td" data-width="22"><span>주행거리</span></div>
                                        <div class="td" data-width="10"><span>사고유무</span></div>
                                        <div class="td" data-width="10"><span>신차가격</span></div>
                                        <div class="td" data-width="10"><span>가이드가</span></div>
                                        <div class="td" data-width="10"><span>차량대금</span></div>
                                        <div class="td" data-width="10"><span>판매가</span></div>
                                        <div class="td" data-width="10"><span>손익</span></div>
                                    </div>
                                </div>
                                <div class="item-list ti-standard" id="guide-history">
                                    <div class="t-item">
                                        <div class="td"><span>BC202100043</span></div>
                                        <div class="td"><span>기아</span></div>
                                        <div class="td"><span>K7 (올 뉴 K7 하이브리드(16~19년))</span></div>
                                        <div class="td"><span>가솔린+전기 2400cc (노블레스 스페셜)</span></div>
                                        <div class="td"><span>15,000,000</span></div>
                                        <div class="td"><span>15,000,000</span></div>
                                        <div class="td"><span>14,500,000</span></div>
                                        <div class="td"><span>16,000,000</span></div>
                                        <div class="td"><span>1,500,000</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">차량 정보</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">브랜드</div>
                        <div class="modal-item_content">
                            <input id="modal_car_manufacturer" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">모델</div>
                        <div class="modal-item_content">
                            <input id="modal_car_model_name"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">세부모델</div>
                        <div class="modal-item_content">
                            <input id="modal_car_model_detail"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">등급</div>
                        <div class="modal-item_content">
                            <input id="modal_car_class_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">트림</div>
                        <div class="modal-item_content">
                            <input id="modal_car_trim_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연식</div>
                        <div class="modal-item_content">
                            <input id="modal_car_maded_in" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연료</div>
                        <div class="modal-item_content">
                            <input id="modal_car_fuel_type" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">배기량</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_car_displacement" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">cc</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">미션</div>
                        <div class="modal-item_content">
                            <input id="modal_car_motor_type"class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">주행거리</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_car_mileage" class="mi_input" type="number">
                            <span class="bb-text">Km</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">사고유무</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_car_accident" id="modal_car_accident">
                                <option value="NONE">무사고</option>
                                <option value="SIMPLE_CHANGE">단순교환</option>
                                <option value="INSURANCE">보험사고</option>
                                <option value="SPECIAL">특수사고(전손/침수)</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">색상</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_car_color" id="modal_car_color">
                                <option th:each="item, stat : ${carColors}" th:value="${item.color}" th:text="${item.color}">무사고</option>
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량번호</div>
                        <div class="modal-item_content">
                            <input id="modal_car_number" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">신차가격(만원)</div>
                        <div class="modal-item_content">
                            <input id="modal_new_car_price" class="mi_input" type="text" >
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">기타 사항</div>
                        <div class="modal-item_content">
                            <input id="modal_other" class="mi_input ins_other" type="text">
                        </div>
                    </div>

                    <div class="modal-item width-100p">
                        <div class="modal-item_title">옵션</div>
                        <div class="modal-item_content">
                            <div id="modal_option_div" class="option-list ins_option_div">
                                <span class="option-item">파노라마 썬루프</span>
                                <span class="option-item">AUX</span>
                                <span class="option-item">등등</span>
                            </div>
                        </div>
                    </div>


                </div>
            </div>


            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">공지사항</span>
                </div>

                <div class="content-item mt-15">
                    <div id="guide_notification" class="note-list">
                        <div class="note-item">
                            <span class="note-date">2021.02.02</span>
                            <span class="note-desc">K7 특수색상 매입 금지</span>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content btn-setting_guide">
                <div class="content-title">
                    <span class="ct-title">가이드</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">엔카</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_enar_id" type="hidden">
                            <input id="modal_price_enar_popular" type="hidden">
                            <input id="modal_price_enar_name" type="hidden">
                            <input id="modal_price_enar" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">KCar</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kcar_id" type="hidden">
                            <input id="modal_price_kcar_popular" type="hidden">
                            <input id="modal_price_kcar_name" type="hidden">
                            <input id="modal_price_kcar" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">KB차차차</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kb_id" type="hidden">
                            <input id="modal_price_kb_popular" type="hidden">
                            <input id="modal_price_kb_name" type="hidden">
                            <input id="modal_price_kb" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">카매니저</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_how_id" type="hidden">
                            <input id="modal_price_how_popular" type="hidden">
                            <input id="modal_price_how_name" type="hidden">
                            <input id="modal_price_how" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>


                </div>

                <div class="content-title">
                    <span class="ct-title">가이드 평균</span>
                </div>
                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">가이드 평균값</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_retail_avg_price" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>
                </div>

                <div class="content-title">
                    <span class="ct-title">경매장가</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">Kcar 경매장</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_kcar_biding_id" type="hidden">
                            <input id="modal_price_kcar_biding_popular" type="hidden">
                            <input id="modal_price_kcar_biding_name" type="hidden">
                            <input id="modal_price_kcar_biding" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">Car Auction 경매장</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_price_car_auction_biding_id" type="hidden">
                            <input id="modal_price_car_auction_biding_popular" type="hidden">
                            <input id="modal_price_car_auction_biding_name" type="hidden">
                            <input id="modal_price_car_auction_biding" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>



                </div>

                <div class="content-title">
                    <span class="ct-title">경매장가 평균</span>
                </div>
                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">경매장가 평균값</div>
                        <div class="modal-item_content border-box">
                            <input id="modal_bid_avg_price" class="mi_input" type="text" readonly="readonly">
                            <span class="bb-text">만원</span>
                        </div>
                    </div>
                </div>

            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">가이드 제출자 및 상태</span>
                </div>

                <div class="content-item flex-row-4 mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">이름</div>
                        <div class="modal-item_content">
                            <input id="modal_admin_name" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">연락처</div>
                        <div class="modal-item_content">
                            <input id="modal_admin_phone" class="mi_input" type="text" readonly="readonly">
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">가이드 상태</div>
                        <div class="modal-item_content">
                            <select class="mi_select" name="modal_guide_status" id="modal_guide_status">
                                <option th:each="item : ${T(com.mobilityk.core.domain.GuideStatus).values()} "
                                        th:value="${item}"
                                        th:text="${item.description}"
                                ></option>
                                <!--
                                <option value="REQUEST">가이드 요청</option>
                                <option value="FINISH">가이드 완료</option>
                                <option value="AUCTION_SUCCESS">경매(낙찰)</option>
                                <option value="AUCTION_FAIL">경매(유찰)</option>
                                <option value="BUY_REQUEST">매입요청</option>
                                <option value="BUY">매입</option>
                                <option value="SELLING">판매중</option>
                                <option value="SELL">매각</option>
                                -->
                            </select>
                        </div>
                    </div>

                    <div class="modal-item">
                        <div class="modal-item_title">차량위치</div>
                        <div class="modal-item_content">
                            <input id="modal_guide_car_location"class="mi_input" type="text">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content content-type02">
                <div class="content-title">
                    <span class="ct-title">가이드 가격</span>
                </div>

                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content">
                            <span id="guide_price" class="total-price">100,000,000 원</span>
                        </div>
                    </div>
                </div>
            </div>


            <div sec:authorize="hasAnyRole('MASTER','ADMIN')" class="modal-content">
                <div class="content-item flex-row-2 w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input  id="modal_guide_price" class="mi_input" type="number" placeholder="가이드 전송 가격을 입력해주세요..">
                            <button id="btnSendGuide"class="mf_button btn-submit hover01">전송</button>
                        </div>
                    </div>
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">차액</div>
                        <div class="modal-item_content flex">
                            <input  id="modal_guide_diff_price" class="mi_input" type="number" placeholder=""
                                    style="color: red;">
                        </div>
                    </div>
                </div>

                <div class="content-item w100p pb-20">

                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title">사진</span>
                </div>

                <div class="content-item w100p">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content image-wrapper">
                            <div id="modal_guide_images" class="image-container" name="guide-image">
                                <a href=""  target="_blank">
                                    <div class="image-item"><img src="" alt=""></div>
                                </a>
                            </div>
                            <button id="btnDownAllFile" name="image-down" class="mf_button btn-submit hover01 mt-20">전체 다운</button>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal-content">
                <div class="content-item w100p pb-20">
                    <div class="modal-item mt-15">
                        <div class="modal-item_title"></div>
                        <div class="modal-item_content flex">
                            <input id="modal_guide_comment_input" class="mi_input" type="text" placeholder="내용을 입력하세요.">
                            <button id="btnSaveComment" class="mf_button btn-submit hover01 ml-10 mr-0">댓글 등록</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div id="modal_guide_comment" class="content-item w100p pb-20">
                    <!--
                    <div class="modal-item mt-15">
                        <div class="modal-item_title">홍길동 이사 <span class="item-date">2021-06-03 10:10</span></div>
                        <div class="modal-item_content">
                            <input class="mi_input" type="text">
                        </div>
                    </div>
                    -->
                </div>
            </div>

            <div class="modal-footer">
                <button  class="mf_button btn-save hover01 btnCarInspect">차량점검표</button>
                <button sec:authorize="hasAnyRole('MASTER')" id="btnDeleteGuide" class="mf_button btn-save hover01">삭제</button>
                <button id="btnSaveGuide" class="mf_button btn-save hover01">저장</button>
                <button id="btnCloseGuide"class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <!-- 매입 매출 모달 -->
        <div class="modal-wrapper main-modal modal-account width-800">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">매입매출</span>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">매입매출</a>
                </div>
            </div>

            <div class="tab-container">
                <div class="tab-header">
                    <div class="btn-tab toggle-select active" id="tab01">
                        <div class="tit-k">기본정보</div>
                    </div>
                    <div class="btn-tab toggle-select" id="tab02">
                        <div class="tit-k">매입</div>
                    </div>
                    <div class="btn-tab toggle-select" id="tab03">
                        <div class="tit-k">매출</div>
                    </div>
                </div>
                <div class="tab-cont">
                    <div class="tab tab01 active">
                        <div class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">기본</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">매입일</div>
                                    <div class="modal-item_content">
                                        <input id="m_buy_date" class="mi_input" type="text" readonly>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">브랜드</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_manufacturer"class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">모델</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_model" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">세부모델</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_model_detail" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">등급</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_class"class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">트림</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_trim" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">차량번호</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_number" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">색상</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_color" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">연식</div>
                                    <div class="modal-item_content">
                                        <input id="m_car_made"class="mi_input" type="text" readonly>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">주행거리</div>
                                    <div class="modal-item_content">
                                        <input id="m_mileage" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">수정 차량번호</div>
                                    <div class="modal-item_content">
                                        <input id="m_modify_car_number" class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">매입 경로</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">구매자</div>
                                    <div class="modal-item_content border-box">
                                        <select class="mi_select" name="" id="m_admin_select">
                                            <option th:each="item, stat:${admins}"
                                                    th:value="${item.id}"
                                                    th:text="${item.name}"
                                            ></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">매입구분</div>
                                    <div class="modal-item_content border-box">
                                        <select class="mi_select" name="" id="m_buy_type_select">
                                            <option th:each="item, stat:${buy_type_list}"
                                                    th:value="${item.id}"
                                                    th:text="${item.name}"
                                            ></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">신차딜러(위치)</div>
                                    <div class="modal-item_content border-box">
                                        <select class="mi_select" name="" id="m_new_car_dealer_location_select">
                                            <option th:each="item, stat:${new_car_dealer_location_list}"
                                                    th:value="${item.id}"
                                                    th:text="${item.name}"
                                            ></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">신차딜러(이름)</div>
                                    <div class="modal-item_content border-box">
                                        <select class="mi_select" name="" id="m_new_car_dealer_name_select">
                                            <option th:each="item, stat:${new_car_dealer_name_list}"
                                                    th:value="${item.id}"
                                                    th:text="${item.name}"
                                            ></option>
                                        </select>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">소매평균가(원)</div>
                                    <div class="modal-item_content">
                                        <input id="m_guide_avg"class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-content">
                            <div class="content-item mt-15">
                                <div class="account-wrap">
                                    <div class="awl">
                                        <div class="account-item">
                                            <p class="ai-tit">판매예상가</p>
                                            <p id="base_sell_expect_price" class="ai-price">15,000,000 원</p>
                                        </div>
                                        <div class="account-item">
                                            <p class="ai-tit">판매가계</p>
                                            <p id="base_sell_sum" class="ai-price">15,000,000 원</p>
                                        </div>
                                        <!--
                                        <div class="account-item">
                                            <p class="ai-tit">판매가</p>
                                            <p id="base_sell_price" class="ai-price">15,000,000 원</p>
                                        </div>
                                        <div class="account-item">
                                            <p class="ai-tit">기타 수수료 수입</p>
                                            <p id="base_other_commission_price"class="ai-price">15,000,000 원</p>
                                        </div>
                                        -->
                                        <div class="account-item">
                                            <p class="ai-tit">판매가 차액</p>
                                            <p id="base_sell_diff_price" class="ai-price">15,000,000 원</p>
                                        </div>
                                    </div>
                                    <div style="height: 250px;" class="aw-calc">
                                        <div class="awc-tit">매출원가 계</div>
                                        <div id="base_buy_price_total" class="awc-price">15,000,000 원</div>
                                    </div>
                                    <div class="awr">
                                        <div class="account-item">
                                            <p class="ai-tit">예상이익</p>
                                            <p id="base_expect_revenue"class="ai-price">15,000,000 원</p>
                                        </div>
                                        <div class="account-item active">
                                            <p class="ai-tit">매출이익</p>
                                            <p id="base_sell_revenue" class="ai-price">15,000,000 원</p>
                                        </div>
                                        <div class="account-item">
                                            <p class="ai-tit">매출이익 차액</p>
                                            <p id="base_sell_revenue_diff_price" class="ai-price">15,000,000 원</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-content content-type02">
                            <div class="content-title">
                                <span class="ct-title">매출이익</span>
                            </div>

                            <div class="content-item w100p pb-20">
                                <div class="modal-item mt-15">
                                    <div class="modal-item_title"></div>
                                    <div class="modal-item_content">
                                        <span id="base_sell_revenue_2" class="total-price">15,000,000 원</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">정보</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">매출처</div>
                                    <div class="modal-item_content">
                                        <input id="base_sell_target" class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">낙찰일</div>
                                    <div class="modal-item_content">
                                        <input id="base_successed_at" class="mi_input modal-datepicker2" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">입금일</div>
                                    <div class="modal-item_content">
                                        <input id="base_deposited_at" class="mi_input modal-datepicker2" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">상태값</div>
                                    <div class="modal-item_content">
                                        <input id="base_guide_status" class="mi_input" type="text">
                                    </div>
                                </div>
                                <div class="modal-item">
                                    <div class="modal-item_title">실판매자</div>
                                    <div class="modal-item_content border-box">
                                        <select id="base_seller_select" class="mi_select" name="" >
                                            <option th:each="item, stat:${seller_list}"
                                                    th:value="${item.name}"
                                                    th:text="${item.name}" value="">전체</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">차량위치</div>
                                    <div class="modal-item_content border-box">
                                        <select id="base_car_location_select" class="mi_select" name="" >
                                            <option th:each="item, stat:${car_location_list}"
                                                    th:value="${item.name}"
                                                    th:text="${item.name}" value="">전체</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="modal-item checkbox_group flex-align-end">
                                <div class="modal-item_content border-none mr-20">
                                    <div class="mi_check-item">
                                        <label for="check-income-yn">수입</label>
                                        <input type="checkbox" id="check-income-yn" class="check_normal" name="checklist-01" value="excel_choice">
                                    </div>
                                </div>
                                <div class="modal-item_content border-none">
                                    <div class="mi_check-item">
                                        <label for="check-need-document">필요서류 확인</label>
                                        <input type="checkbox" id="check-need-document" class="check_normal" name="checklist-01" value="excel_choice">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab tab02">
                        <div id="buy_base_cost_div_parent" class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">매입원가(원)</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">매입원가 계</div>
                                    <div class="modal-item_content">
                                        <input id="buy_base_cost_input" class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>

                            <div id="buy_base_cost_div" class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">차량대금</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div id="buy_prod_price_div_parent" class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">상품화비용(원)</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">상품화비용 계</div>
                                    <div class="modal-item_content">
                                        <input id="buy_prod_price_input" class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>

                            <div id="buy_prod_price_div" class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">정기검사</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div id="buy_bid_price_div_parent" class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">경매비용(원)</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">경매비용 계</div>
                                    <div class="modal-item_content">
                                        <input id="buy_bid_price_input" class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>

                            <div id="buy_bid_price_div" class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">출품료</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>


                            </div>
                        </div>

                        <div id="buy_retail_price_div_parent" class="modal-content">
                            <div class="content-title">
                                <span class="ct-title">소매비용(원)</span>
                            </div>

                            <div class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">소매비용 계</div>
                                    <div class="modal-item_content">
                                        <input id="buy_retail_price_input" class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>

                            <div id="buy_retail_price_div" class="content-item flex-row-4 mt-15">
                                <div class="modal-item">
                                    <div class="modal-item_title">판매수수료</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">조합수수료</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">탁송비</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>

                                <div class="modal-item">
                                    <div class="modal-item_title">기타</div>
                                    <div class="modal-item_content">
                                        <input class="mi_input" type="text">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab tab03">
                        <div class="tab-title">
                            <span class="tit-desc">매출(원)</span>
                            <button type="button" class="add-outcome_item">+</button>
                        </div>
                        <div id="sell_div" class="outcome-list">
                            <div class="modal-content">
                                <div class="content-item flex-row-4 mt-15">
                                    <div class="modal-item">
                                        <div class="modal-item_title">매출처</div>
                                        <div class="modal-item_content">
                                            <select class="mi_select" name="" id="">
                                                <option value="">전체</option>
                                                <option value="">옵션1</option>
                                                <option value="">옵션2</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="modal-item">
                                        <div class="modal-item_title">판매예상가</div>
                                        <div class="modal-item_content">
                                            <input class="mi_input" type="text">
                                        </div>
                                    </div>

                                    <div class="modal-item">
                                        <div class="modal-item_title">판매가</div>
                                        <div class="modal-item_content">
                                            <input class="mi_input" type="text">
                                        </div>
                                    </div>

                                    <div class="modal-item">
                                        <div class="modal-item_title">기타 수수료 수입</div>
                                        <div class="modal-item_content">
                                            <input class="mi_input" type="text">
                                        </div>
                                    </div>
                                </div>

                                <div class="content-item mt-15">
                                    <div class="modal-item">
                                        <div class="modal-item_title">비고</div>
                                        <div class="modal-item_content">
                                            <input class="mi_input" type="text">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button  class="mf_button btn-guide hover01">가이드</button>
                <button  class="mf_button btn-table hover01 btnCarInspect">차량점검표</button>
                <button id="btnSaveBuyAndSell" class="mf_button btn-save hover01">저장</button>
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <!-- 매입원가 항목 추가 -->
        <div class="modal-wrapper main-modal modal-setting_01 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">매입원가 항목 추가</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_buy_price" class="mi_input" type="text">
                            <div id="btnSaveBuyPrice" class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="buy_price_div" class="tag-list">
                        <div class="tag buy-item">차량대금</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <!-- 상품화비용 항목 추가 -->
        <div class="modal-wrapper main-modal modal-setting_02 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">상품화비용 항목 추가</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_prod_price" class="mi_input" type="text">
                            <div id="btnSaveProdPrice"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="prod_price_div" class="tag-list">
                        <div class="tag">정기검사</div>
                        <div class="tag">보험료</div>
                        <div class="tag">판금</div>
                        <div class="tag">도장</div>
                        <div class="tag">광택</div>
                        <div class="tag">유리</div>
                        <div class="tag">기타</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <!-- 경매비용 항목 추가 -->
        <div class="modal-wrapper main-modal modal-setting_03 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">경매비용 항목 추가</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_bid_price" class="mi_input" type="text">
                            <div id="btnSaveBidPrice" class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="bid_price_div" class="tag-list">
                        <div class="tag">출품료</div>
                        <div class="tag">탁송비</div>
                        <div class="tag">성약수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <!-- 소매비용 항목 추가 -->
        <div class="modal-wrapper main-modal modal-setting_04 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">소매비용 항목 추가</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_retail_price"class="mi_input" type="text">
                            <div id="btnSaveRetailPrice"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="retail_price_div" class="tag-list">
                        <div class="tag">판매수수료</div>
                        <div class="tag">조합수수료</div>
                        <div class="tag">탁송비</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>


        <div class="modal-wrapper main-modal modal-setting_05 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">매입구분 항목 추가</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_buy_type"class="mi_input" type="text">
                            <div id="btnSaveBuyType"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="buy_type_div" class="tag-list">
                        <div class="tag buy-type">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <div class="modal-wrapper main-modal modal-setting_06 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">신차딜러 위치</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_new_dealer_location"class="mi_input" type="text">
                            <div id="btnSaveNewDealerLocation"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="new_dealer_location_div" class="tag-list">
                        <div class="tag new-dealer-location">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <div class="modal-wrapper main-modal modal-setting_07 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">신차딜러 이름</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_new_dealer_name"class="mi_input" type="text">
                            <div id="btnSaveNewDealerName"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="new_dealer_name_div" class="tag-list">
                        <div class="tag new-dealer-name">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <div class="modal-wrapper main-modal modal-setting_08 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">차량위치</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_car_location"class="mi_input" type="text">
                            <div id="btnSaveCarLocation"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="car_location_div" class="tag-list">
                        <div class="tag car-location">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>


        <div class="modal-wrapper main-modal modal-setting_09 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">매출처</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_sell_target"class="mi_input" type="text">
                            <div id="btnSaveSellTarget"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="sell_target_div" class="tag-list">
                        <div class="tag car-location">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>

        <div class="modal-wrapper main-modal modal-setting_10 width-400">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">실판매자</span>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-item mt-15">
                    <div class="modal-item">
                        <div class="modal-item_title">항목명</div>
                        <div class="modal-item_content border-box">
                            <input id="in_seller"class="mi_input" type="text">
                            <div id="btnSaveSeller"class="modal-item-button btn-enroll_model hover03">등록</div>
                        </div>
                    </div>

                    <div id="seller_div" class="tag-list">
                        <div class="tag car-location">판매수수료</div>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>


        <div class="modal-wrapper main-modal modal-excel_download width-600">
            <div class="modal-header">
                <div class="modal-title">
                    <span class="mt-text">엑셀 다운로드</span>
                </div>
                <div class="breadcrumb">
                    <a class="bc-item">Home</a>
                    <a class="bc-item">매입매출</a>
                    <a class="bc-item">엑셀 다운로드</a>
                </div>
            </div>

            <div class="modal-content">
                <div class="content-title">
                    <span class="ct-title"></span>
                </div>

                <div class="content-item flex-row-2">
                    <div class="modal-check-list">
                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-01">기본</label>
                                    <input type="checkbox" id="checkall-01" class="check_all" name="checklist-01" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">매입일</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_buy_date">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">브랜드</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_manufacturer">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">모델</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_model">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">세부모델</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_model_detail">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">등급</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_class">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">트림</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_trim">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">차량번호</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_number">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">색상</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_color">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">연식</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_car_made_year">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">주행거리</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_mileage">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-03">수정 차량번호</label>
                                    <input type="checkbox" id="check-03" class="check_normal" name="checklist-01" value="excel_modify_car_number">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-02">매입경로</label>
                                    <input type="checkbox" id="checkall-02" class="check_all" name="checklist-02" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-05">구매자</label>
                                    <input type="checkbox" id="check-05" class="check_normal" name="checklist-02" value="excel_buyer">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-05">매입구분</label>
                                    <input type="checkbox" id="check-05" class="check_normal" name="checklist-02" value="excel_buy_type">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-06">신차딜러(위치)</label>
                                    <input type="checkbox" id="check-06" class="check_normal" name="checklist-02" value="excel_new_car_dealer_location">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-07">신차딜러(이름)</label>
                                    <input type="checkbox" id="check-07" class="check_normal" name="checklist-02" value="excel_new_car_dealer_name">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-07">소매평균가(원)</label>
                                    <input type="checkbox" id="check-07" class="check_normal" name="checklist-02" value="excel_retail_avg">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-03">손익</label>
                                    <input type="checkbox" id="checkall-03" class="check_all" name="checklist-03" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-23">매출원가 계</label>
                                    <input type="checkbox" id="check-23" class="check_normal" name="checklist-03" value="excel_sell_price_sum">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-24">판매예상가</label>
                                    <input type="checkbox" id="check-24" class="check_normal" name="checklist-03" value="excel_sell_expect_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-25">예상이익</label>
                                    <input type="checkbox" id="check-25" class="check_normal" name="checklist-03" value="excel_expect_revenue">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-26">판매가</label>
                                    <input type="checkbox" id="check-26" class="check_normal" name="checklist-03" value="excel_sell_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-27">매출이익</label>
                                    <input type="checkbox" id="check-27" class="check_normal" name="checklist-03" value="excel_sell_revenue">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-28">판매가 차액</label>
                                    <input type="checkbox" id="check-28" class="check_normal" name="checklist-03" value="excel_sell_diff_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-29">매출이익 차액</label>
                                    <input type="checkbox" id="check-29" class="check_normal" name="checklist-03" value="excel_sell_revenue_diff_price">
                                </div>
                            </div>

                        </div>

                    </div>

                    <div class="modal-check-list">

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-04">가격</label>
                                    <input type="checkbox" id="checkall-04" class="check_all" name="checklist-04" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">가이드가격</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-04" value="excel_guide_price">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-39">점검감가액</label>
                                    <input type="checkbox" id="check-39" class="check_normal" name="checklist-04" value="excel_inspect_minus_money">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-40">평가사감가액</label>
                                    <input type="checkbox" id="check-40" class="check_normal" name="checklist-04" value="excel_evaluator_minus_money">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-41">최종매입가격</label>
                                    <input type="checkbox" id="check-41" class="check_normal" name="checklist-04" value="excel_guide_final_buy_price">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-05">평가사 평가사유</label>
                                    <input type="checkbox" id="checkall-05" class="check_all" name="checklist-05" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">평가사유</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-05" value="excel_evaluator_reason">
                                </div>
                            </div>
                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-06">데미지 체크 세부내역</label>
                                    <input type="checkbox" id="checkall-06" class="check_all" name="checklist-06" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기교환(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_gigyohwan">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기판금(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_pangum">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기도색(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_dosaek">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">교환요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_gigyohwan">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">판금요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_pangum">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">도색요망(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_need_dosaek">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">기타(판수/원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_other">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">합계(원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-06" value="excel_damage_total">
                                </div>
                            </div>

                        </div>

                        <div class="modal-item checkbox_group mb-10 pb-10">
                            <div class="modal-item_title mb-5">
                                <div class="mi_check-item">
                                    <label class="" for="checkall-07">체크리스트</label>
                                    <input type="checkbox" id="checkall-07" class="check_all" name="checklist-07" value="excel_choice">
                                </div>
                            </div>
                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">체크리스트 항목</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-07" value="excel_check_list">
                                </div>
                            </div>

                            <div class="modal-item_content border-none">
                                <div class="mi_check-item">
                                    <label for="check-38">합계(원)</label>
                                    <input type="checkbox" id="check-38" class="check_normal" name="checklist-07" value="excel_check_list_total">
                                </div>
                            </div>

                        </div>

                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button id="btnExcelDown" class="mf_button btn-download hover01">엑셀 다운로드</button>
                <button class="mf_button btn-close_modal hover02">닫기</button>
            </div>

            <div class="top-close btn-close_modal"><i class="xi-close"></i></div>
        </div>


    </div>
</div>

<script>
    let search = "";
    let baseUri = `/admin/buyandsell`;

    let maxOrderIndex = -1;

    let buyAndSell = {};

    let buyBaseCostList = [];
    let buyBidPriceList = [];
    let buyProdPriceList = [];
    let buyRetailPriceList = [];

    let sellTargetList = [];

    let buyList = [];
    let sellList = [];
    let sellerList = [];

    let sell = {};

    let buyTotalPrice = 0;

    let guidePriceList = [];
    let guideCommentList = [];
    let guideAddImgList = [];
    let guidePriceCommentList = [];

    function activeModal_ExcelDownload() {
        openLayer();
        $('.modal-excel_download').addClass('active');
    }

    function setBaseInfo() {
        buyAndSell.modifyCarNumber = $('#m_modify_car_number').val();
        buyAndSell.buyerId = $('#m_admin_select option:selected').val();
        buyAndSell.buyType = $('#m_buy_type_select option:selected').text();
        buyAndSell.newCarDealerLocation = $('#m_new_car_dealer_location_select option:selected').text();
        buyAndSell.newCarDealerName = $('#m_new_car_dealer_name_select option:selected').text();

        if($('#base_successed_at').val()) {
            let successedAt = $('#base_successed_at').val();
            let dateArr = successedAt.split("-");
            let year = dateArr[0];
            let month = dateArr[1];
            let day = dateArr[2];

            if(month < 10 && month.length == 1) {
                month = "0" + month;
            }
            if(day < 10 && day.length == 1) {
                day = "0" + day;
            }
            buyAndSell.successedAt = year + "-" + month + "-" + day + 'T00:00:00';
        }
        if($('#base_deposited_at').val()) {
            let successedAt = $('#base_deposited_at').val();
            let dateArr = successedAt.split("-");
            let year = dateArr[0];
            let month = dateArr[1];
            let day = dateArr[2];

            if(month < 10 && month.length == 1) {
                month = "0" + month;
            }
            if(day < 10 && day.length == 1) {
                day = "0" + day;
            }
            buyAndSell.depositedAt = year + "-" + month + "-" + day + 'T00:00:00';
        }

        buyAndSell.seller = $('#base_seller_select option:selected').text();
        buyAndSell.carLocation = $('#base_car_location_select option:selected').text();

    }

    function setBuyInfo() {
        buyList = [];

        $('input[name=buy-base-cost]').each(function () {
            let id = $(this).attr('data-id');
            let name = $(this).attr('data-name');
            let itemType = $(this).attr('buy-type');
            let obj = {};
            obj.id = id;
            obj.name = name;
            obj.itemType = itemType;
            obj.price = $(this).val().replace(/[^0-9]/g, "");
            if(!obj.price) { obj.price = 0; }
            buyList.push(obj);
            console.log(id + ' ' + name + ' ' + itemType);
        });
        $('input[name=buy-prod-price]').each(function () {
            let id = $(this).attr('data-id');
            let name = $(this).attr('data-name');
            let itemType = $(this).attr('buy-type');
            let obj = {};
            obj.id = id;
            obj.name = name;
            obj.itemType = itemType;
            obj.price = $(this).val().replace(/[^0-9]/g, "");
            if(!obj.price) { obj.price = 0; }
            buyList.push(obj);
            console.log(id + ' ' + name + ' ' + itemType);
        });
        $('input[name=buy-bid-price]').each(function () {
            let id = $(this).attr('data-id');
            let name = $(this).attr('data-name');
            let itemType = $(this).attr('buy-type');
            let obj = {};
            obj.id = id;
            obj.name = name;
            obj.itemType = itemType;
            obj.price = $(this).val().replace(/[^0-9]/g, "");
            if(!obj.price) { obj.price = 0; }
            buyList.push(obj);
            console.log(id + ' ' + name + ' ' + itemType);
        });
        $('input[name=buy-retail-price]').each(function () {
            let id = $(this).attr('data-id');
            let name = $(this).attr('data-name');
            let itemType = $(this).attr('buy-type');
            let obj = {};
            obj.id = id;
            obj.name = name;
            obj.itemType = itemType;
            obj.price = $(this).val().replace(/[^0-9]/g, "");
            if(!obj.price) { obj.price = 0; }
            buyList.push(obj);
            console.log(id + ' ' + name + ' ' + itemType);
        });

    }

    function setSellInfo() {
        sellList = [];
        $('#sell_div').children().each(function (item) {

            let obj = {};

            let id = $(this).attr('data-id');
            let orderIndex = $(this).attr('order-index');

            let sellTarget = $('select[order-index='+orderIndex+'] option:selected').val();
            let hopePrice = $('input[order-index='+orderIndex+'][name=hope-price]').val().replace(/[^0-9]/g, "");
            let sellPrice = $('input[order-index='+orderIndex+'][name=sell-price]').val().replace(/[^0-9]/g, "");
            let otherCommissionPrice = $('input[order-index='+orderIndex+'][name=other-commission-price]').val().replace(/[^0-9]/g, "");
            let note = $('input[order-index='+orderIndex+'][name=note]').val();

            if(!hopePrice) { hopePrice = 0; }
            if(!sellPrice) { sellPrice = 0; }
            if(!otherCommissionPrice) { otherCommissionPrice = 0; }

            obj.id = id;
            obj.orderIndex = orderIndex;
            obj.sellTarget = sellTarget;
            obj.hopePrice = hopePrice;
            obj.sellPrice = sellPrice;
            obj.otherCommission = otherCommissionPrice;
            obj.note = note;

            if($('#check-income-yn').is(':checked')) {
                obj.incomeYn = 'Y';
            } else {
                obj.incomeYn = 'N';
            }
            if($('#check-need-document').is(':checked')) {
                obj.needDocumentYn = 'Y';
            } else {
                obj.needDocumentYn = 'N';
            }
            sellList.push(obj);
        });
    }

    function setBaseInfoTab() {

        $('#m_buy_date').val(buyAndSell.buyDateStr);
        $('#m_car_manufacturer').val(buyAndSell.guide.carManufacturer);
        $('#m_car_model').val(buyAndSell.guide.carModel);
        $('#m_car_model_detail').val(buyAndSell.guide.carModelDetail);
        $('#m_car_class').val(buyAndSell.guide.carClassName);
        $('#m_car_trim').val(buyAndSell.guide.carTrim);
        $('#m_car_number').val(buyAndSell.guide.carNumber);
        $('#m_car_color').val(buyAndSell.guide.carColor);
        $('#m_car_made').val(buyAndSell.guide.carMadedYear + "." + buyAndSell.guide.carMadedMonth);
        $('#m_mileage').val(buyAndSell.guide.mileage);
        $('#m_modify_car_number').val(buyAndSell.modifyCarNumber);

        $('#m_admin_select').children().each(function () {
            let id = $(this).val();
            if(id == buyAndSell.buyerId) {
                $(this).attr('selected', 'selected');
            }
        });

        $('#m_buy_type_select').children().each(function () {
            let data = $(this).text();
            if(data == buyAndSell.buyType) {
                $(this).attr('selected', 'selected');
            }
        });

        $('#m_new_car_dealer_location_select').children().each(function () {
            let data = $(this).text();
            if(data == buyAndSell.newCarDealerLocation) {
                $(this).attr('selected', 'selected');
            }
        });

        $('#m_new_car_dealer_name_select').children().each(function () {
            let data = $(this).text();
            if(data == buyAndSell.newCarDealerName) {
                $(this).attr('selected', 'selected');
            }
        });


        let stepPrice = 0;
        if(buyAndSell.guide.retailAvgPrice <= 5000000) {
            stepPrice = 1000000;
        } else if(buyAndSell.guide.retailAvgPrice > 5000000 &&
            buyAndSell.guide.retailAvgPrice <= 10000000) {
            stepPrice = 1200000;
        } else if(buyAndSell.guide.retailAvgPrice > 10000000 &&
            buyAndSell.guide.retailAvgPrice <= 15000000) {
            stepPrice = 1500000;
        } else if(buyAndSell.guide.retailAvgPrice > 15000000 &&
            buyAndSell.guide.retailAvgPrice <= 20000000) {
            stepPrice = 2000000;
        } else if(buyAndSell.guide.retailAvgPrice > 20000000 &&
            buyAndSell.guide.retailAvgPrice <= 30000000) {
            stepPrice = 3000000;
        } else {
            stepPrice = 4000000;
        }
        let sellExceptPrice = buyAndSell.guide.retailAvgPrice - stepPrice;


        if(!sell.sellPrice) {sell.sellPrice = 0;}
        if(!sell.otherCommission) {sell.otherCommission = 0;}
        if(!buyTotalPrice) {buyTotalPrice = 0;}
        if(!sell.hopePrice) {sell.hopePrice = 0;}

        let sellRevenue = sell.sellPrice + sell.otherCommission - buyTotalPrice;

        let sellPrice = sell.sellPrice;
        let otherCommission = sell.otherCommission;
        let sellSum = sellPrice + otherCommission;

        let sellDiffPrice = sell.hopePrice - sellSum;

        let expectRevenue = sell.hopePrice - buyTotalPrice;

        let sellRevenueDiffPrice = expectRevenue - sellRevenue;

        $('#m_guide_avg').val(Common.comma(buyAndSell.guide.retailAvgPrice * 10000));
        $('#base_sell_expect_price').text(Common.comma(sell.hopePrice) + '원');

        if(!sellSum || sellSum == 0) {
            $('#base_sell_sum').text("-");
            $('#base_sell_diff_price').text("-");
            $('#base_sell_revenue').text("-");
            $('#base_sell_revenue_diff_price').text("-");
        } else {
            $('#base_sell_sum').text(Common.comma(sellSum) + '원');
            $('#base_sell_diff_price').text(Common.comma(sellDiffPrice) + '원');
            $('#base_sell_revenue').text(Common.comma(sellRevenue) + '원');
            $('#base_sell_revenue_diff_price').text(Common.comma(sellRevenueDiffPrice) + '원');
        }

        $('#base_sell_price').text(Common.comma(sell.sellPrice) + '원');
        $('#base_other_commission_price').text(Common.comma(sell.otherCommission) + '원');
        $('#base_buy_price_total').text(Common.comma(buyTotalPrice) + '원');
        $('#base_expect_revenue').text(Common.comma(expectRevenue) + '원');
        $('#base_sell_revenue_2').text(Common.comma(sellRevenue) + '원');

        let maxSellInfo = {};
        let tempOrderIndex = -1;
        buyAndSell.sellList.forEach(function (item) {
            if(item.orderIndex > tempOrderIndex) {
                tempOrderIndex = item.orderIndex;
                maxSellInfo = item;
            }
            if(item.incomeYn == 'Y') {
                $('#check-income-yn').prop('checked', true);
            } else {
                $('#check-income-yn').prop('checked', false);
            }
            if(item.needDocumentYn == 'Y') {
                $('#check-need-document').prop('checked', true);
            } else {
                $('#check-need-document').prop('checked', false);
            }
        });
        if(maxSellInfo) {
            $('#base_sell_target').val(maxSellInfo.sellTarget);
        }
        if(buyAndSell.successedAtStr && buyAndSell.successedAtStr != 'null') {
            $('#base_successed_at').val(buyAndSell.successedAtStr);
        } else {
            $('#base_successed_at').val('');
        }

        if(buyAndSell.depositedAtStr && buyAndSell.depositedAtStr != 'null') {
            $('#base_deposited_at').val(buyAndSell.depositedAtStr);
        } else {
            $('#base_deposited_at').val('');
        }


        $('#base_guide_status').val(buyAndSell.guide.guideStatusStr);

        $('#base_seller_select').children().each(function () {
            let data = $(this).text();
            if(data == buyAndSell.seller) {
                $(this).attr('selected', 'selected');
            }
        });

        $('#base_car_location_select').children().each(function () {
            let data = $(this).text();
            if(data == buyAndSell.carLocation) {
                $(this).attr('selected', 'selected');
            }
        });


    }
    function setBuyItemTab() {
        buyTotalPrice = 0;
        $('#buy_base_cost_div').empty();
        $('#buy_prod_price_div').empty();
        $('#buy_bid_price_div').empty();
        $('#buy_retail_price_div').empty();

        let html = ``;
        let totalSum = 0;

        buyAndSell.buyList.forEach(function (buy) {
            buyTotalPrice += buy.price;
        });

        buyBaseCostList.forEach(function (item) {
            console.log(item);
            let isSetValue = false;
            let value = 0;
            let commavalue = 0;
            html += `<div class="modal-item" data-id="${item.id}" buy-type="${item.itemType}" >`;
            html += `<div class="modal-item_title">${item.name}</div>`;
            html += `<div class="modal-item_content">`;

            buyAndSell.buyList.forEach(function (buy) {
                if(item.itemType == buy.itemType && item.name == buy.name) {
                    isSetValue = true;
                    value = buy.price;
                    return;
                }
            });

            totalSum += value;
            commavalue = Common.comma(value);
            html += `<input class="mi_input" name="buy-base-cost" data-id="${item.id}" data-name="${item.name}" buy-type="${item.itemType}" type="text" value="${commavalue}">`;
            html += `</div>`;
            html += `</div>`;
        });
        $('#buy_base_cost_div').append(html);
        $('#buy_base_cost_input').val(Common.comma(totalSum));
        //buyTotalPrice += totalSum;


        html = ``;
        totalSum = 0;
        buyProdPriceList.forEach(function (item) {
            let isSetValue = false;
            let value = 0;
            let commavalue = 0;
            html += `<div class="modal-item" data-id="${item.id}" buy-type="${item.itemType}">`;
            html += `<div class="modal-item_title">${item.name}</div>`;
            html += `<div class="modal-item_content">`;

            buyAndSell.buyList.forEach(function (buy) {
                if(item.itemType == buy.itemType && item.name == buy.name) {
                    isSetValue = true;
                    value = buy.price;
                }
            });
            totalSum += value;
            commavalue = Common.comma(value);
            html += `<input class="mi_input" data-id="${item.id}" data-name="${item.name}" buy-type="${item.itemType}" name="buy-prod-price" type="text" value="${commavalue}">`;
            html += `</div>`;
            html += `</div>`;

        });
        $('#buy_prod_price_div').append(html);
        $('#buy_prod_price_input').val(Common.comma(totalSum));
        //buyTotalPrice += totalSum;

        html = ``;
        totalSum = 0;
        buyBidPriceList.forEach(function (item) {
            let isSetValue = false;
            let value = 0;
            let commavalue = 0;
            html += `<div class="modal-item" data-id="${item.id}" buy-type="${item.itemType}">`;
            html += `<div class="modal-item_title">${item.name}</div>`;
            html += `<div class="modal-item_content">`;

            buyAndSell.buyList.forEach(function (buy) {
                if(item.itemType == buy.itemType && item.name == buy.name) {
                    isSetValue = true;
                    value = buy.price;
                }
            });
            totalSum += value;
            commavalue = Common.comma(value);
            html += `<input class="mi_input" data-id="${item.id}" data-name="${item.name}" buy-type="${item.itemType}" name="buy-bid-price" type="text" value="${commavalue}">`;
            html += `</div>`;
            html += `</div>`;

        });
        $('#buy_bid_price_div').append(html);
        $('#buy_bid_price_input').val(Common.comma(totalSum));


        html = ``;
        totalSum = 0;
        buyRetailPriceList.forEach(function (item) {
            let isSetValue = false;
            let value = 0;
            let commavalue = 0;
            html += `<div class="modal-item" data-id="${item.id}" buy-type="${item.itemType}">`;
            html += `<div class="modal-item_title">${item.name}</div>`;
            html += `<div class="modal-item_content">`;

            buyAndSell.buyList.forEach(function (buy) {
                if(item.itemType == buy.itemType && item.name == buy.name) {
                    isSetValue = true;
                    value = buy.price;
                }
            });
            totalSum += value;
            commavalue = Common.comma(value);
            html += `<input class="mi_input" data-id="${item.id}" data-name="${item.name}" buy-type="${item.itemType}" name="buy-retail-price" type="text" value="${commavalue}">`;
            html += `</div>`;
            html += `</div>`;
        });
        $('#buy_retail_price_div').append(html);
        $('#buy_retail_price_input').val(Common.comma(totalSum));

        $('#base_buy_price_total').text(Common.comma(buyTotalPrice) + '원');
    }
    function getSellItemHtml(data) {

        let sellTarget = ``;
        let hopePrice = ``;
        let sellPrice = ``;
        let otherCommission = ``;
        let note = ``;
        let orderIndex = ``;
        let id = ``;
        let commahopePrice = ``;
        let commasellPrice = ``;
        let commaotherCommission = ``;
        
        if(data) {
            sellTarget = data.sellTarget;
            hopePrice = data.hopePrice;
            sellPrice = data.sellPrice;
            otherCommission = data.otherCommission;
            note = data.note;
            orderIndex = data.orderIndex;
            id = data.id;
        } else {
            id = -1;
            orderIndex = maxOrderIndex;
            maxOrderIndex++;
        }

        let html = ``;
        html += `<div class="modal-content" data-id="${id}" order-index="${orderIndex}">`;
        html += `<div class="content-item flex-row-4 mt-15">`;
        html += `<div class="modal-item">`;
        html += `<div class="modal-item_title">매출처</div>`;
        html += `<div class="modal-item_content">`;
        html += `<select class="mi_select" data-id="${id}" order-index="${orderIndex}" name="sell-select" id="">`;
        sellTargetList.forEach(function (item) {
            if(item.name == sellTarget) {
                html += `<option value="${item.name}" selected>${item.name}</option>`;
            } else {
                html += `<option value="${item.name}">${item.name}</option>`;
            }
        });
        html += `</select>`;
        html += `</div>`;
        html += `</div>`;
        html += `<div class="modal-item">`;
        html += `<div class="modal-item_title">판매예상가</div>`;
        html += `<div class="modal-item_content">`;
        if(hopePrice) {
            commahopePrice=Common.comma(hopePrice);
            html += `<input class="mi_input" data-id="${id}" name="hope-price" order-index="${orderIndex}" type="text" value="${commahopePrice}">`;
        } else {
            html += `<input class="mi_input" data-id="${id}" name="hope-price" order-index="${orderIndex}" type="number" value="0">`;
        }
        html += `</div>`;
        html += `</div>`;
        html += `<div class="modal-item">`;
        html += `<div class="modal-item_title">판매가</div>`;
        html += `<div class="modal-item_content">`;
        if(sellPrice) {
            commasellPrice=Common.comma(sellPrice);
            html += `<input class="mi_input" data-id="${id}" name="sell-price" order-index="${orderIndex}" type="text" value="${commasellPrice}">`;
        } else {
            html += `<input class="mi_input" data-id="${id}" name="sell-price" order-index="${orderIndex}" type="number" value="0">`;
        }

        html += `</div>`;
        html += `</div>`;
        html += `<div class="modal-item">`;
        html += `<div class="modal-item_title">기타 수수료 수입</div>`;
        html += `<div class="modal-item_content">`;
        if(otherCommission) {
            commaotherCommission=Common.comma(otherCommission);
            html += `<input class="mi_input" data-id="${id}" name="other-commission-price" order-index="${orderIndex}" type="text" value="${commaotherCommission}">`;
        } else {
            html += `<input class="mi_input" data-id="${id}" name="other-commission-price" order-index="${orderIndex}" type="number" value="0">`;
        }

        html += `</div>`;
        html += `</div>`;
        html += `</div>`;
        html += `<div class="content-item mt-15">`;
        html += `<div class="modal-item">`;
        html += `<div class="modal-item_title">비고</div>`;
        html += `<div class="modal-item_content">`;
        if(note) {
            html += `<input class="mi_input" data-id="${id}" name="note" order-index="${orderIndex}" type="text" value="${note}">`;
        } else {
            html += `<input class="mi_input" data-id="${id}" name="note" order-index="${orderIndex}" type="text">`;
        }
        html += `</div>`;
        html += `</div>`;
        html += `</div>`;
        html += `</div>`;
        return html;
    }
    function setSellItemTab() {
        $('#sell_div').empty();
        if(sellList.length == 0) {
            maxOrderIndex = 0;
            let sellItemHtml = getSellItemHtml();
            $('#sell_div').append(sellItemHtml);
        } else {
            maxOrderIndex = sellList.length;
            let sellItemHtml = ``;
            sellList.forEach(function (item) {
                sellItemHtml += getSellItemHtml(item);
            });
            $('#sell_div').append(sellItemHtml);
        }

    }

    function updateBuyAndSellModalData(data) {
        $('#guideId').val(data.guide.id);
        buyAndSell = data;
        buyBaseCostList = data.buyBaseCostList;
        buyBidPriceList = data.buyBidPriceList;
        buyProdPriceList = data.buyProdPriceList;
        buyRetailPriceList = data.buyRetailPriceList;

        buyList = data.buyList;
        sellList = data.sellList;

        let orderIndex = -1;
        sellList.forEach(function (item) {
            if(orderIndex < item.orderIndex) {
                orderIndex = item.orderIndex;
                sell = item;
            }
        });

        sellTargetList = data.sellTargets;
        sellerList = data.sellers;

        setBuyItemTab();
        setSellItemTab();
        setBaseInfoTab();
    }

    function activeModal_Account(){
        $('.btn-tab').removeClass('active');
        $('.btn-tab#tab01').addClass('active');
        $('.tab').removeClass('active');
        $('.tab.tab01').addClass('active');

        let buyAndSellId = $(this).attr('id');
        Service.getBuyAndSellDetail(buyAndSellId, function (data) {
            console.log(data);
            maxOrderIndex = data.maxSellOrderIndex;
            updateBuyAndSellModalData(data);
            openLayer();
            $('.modal-account').addClass('active');
        });
    }
    function activeModal_Modal1(){
        Service.getBuyItems('BUY_BASE_COST', function (data) {
            $('#buy_price_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${item.id}">${item.name}</div>`;
                $('#buy_price_div').append(html);
            });
            openLayer();
            $('.modal-setting_01').addClass('active');
        });
    }
    function activeModal_Modal2(){
        Service.getBuyItems('BUY_PROD_PRICE', function (data) {
            $('#prod_price_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${item.id}">${item.name}</div>`;
                $('#prod_price_div').append(html);
            });
            openLayer();
            $('.modal-setting_02').addClass('active');
        });
    }
    function activeModal_Modal3(){
        Service.getBuyItems('BUY_BID_PRICE', function (data) {
            $('#bid_price_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${item.id}">${item.name}</div>`;
                $('#bid_price_div').append(html);
            });
            openLayer();
            $('.modal-setting_03').addClass('active');
        });
    }
    function activeModal_Modal4(){
        Service.getBuyItems('BUY_RETAIL_PRICE', function (data) {
            $('#retail_price_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${item.id}">${item.name}</div>`;
                $('#retail_price_div').append(html);
            });
            openLayer();
            $('.modal-setting_04').addClass('active');
        });
    }
    function activeModal_Modal5(){
        Service.getBuyTypes(function (data) {
            $('#buy_type_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag buy-type" name="buy-type" data-id="${item.id}">${item.name}</div>`;
                $('#buy_type_div').append(html);
            });
            openLayer();
            $('.modal-setting_05').addClass('active');
        });
    }
    function activeModal_Modal6(){
        Service.getNewDealer('LOCATION', function (data) {
            $('#new_dealer_location_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag dealer-location" name="dealer-location"  data-id="${item.id}">${item.name}</div>`;
                $('#new_dealer_location_div').append(html);
            });
            openLayer();
            $('.modal-setting_06').addClass('active');
        });
    }
    function activeModal_Modal7(){
        Service.getNewDealer('NAME', function (data) {
            $('#new_dealer_name_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag dealer-name" name="dealer-name" data-id="${item.id}">${item.name}</div>`;
                $('#new_dealer_name_div').append(html);
            });
            openLayer();
            $('.modal-setting_07').addClass('active');
        });
    }
    function activeModal_Modal8(){
        Service.getCarLocation(function (data) {
            $('#car_location_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag car-location" name="car-location" data-id="${item.id}">${item.name}</div>`;
                $('#car_location_div').append(html);
            });
            openLayer();
            $('.modal-setting_08').addClass('active');
        });
    }

    function activeModal_Modal9(){
        Service.getSellTargets(function (data) {
            $('#sell_target_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag sell-target" name="sell-target" data-id="${item.id}">${item.name}</div>`;
                $('#sell_target_div').append(html);
            });
            openLayer();
            $('.modal-setting_09').addClass('active');
        });
    }

    function activeModal_Modal10(){
        Service.getSellers(function (data) {
            $('#seller_div').empty();
            data.forEach(function (item) {
                let html = `<div class="tag sell-target" name="sell-target" data-id="${item.id}">${item.name}</div>`;
                $('#sell_target_div').append(html);
            });
            openLayer();
            $('.modal-setting_10').addClass('active');
        });
    }

    function goAnotherPage(page, size) {
        let sort = $('#sort').val();
        let direction = $('#direction').val();
        let querySort = sort+","+direction;
        goSearch(page, size, querySort);
    }

    function goSearch(page, size, sort) {
        let carNumber = $('#s_car_number').val();
        let dealerName = $('#s_dealer_name').val();
        let carModel = $('#s_car_model').val();
        let startedAt = $('#s_started_at').val();
        let endedAt = $('#s_ended_at').val();
        let successStartedAt = $('#s_success_started_at').val();
        let successEndedAt = $('#s_success_ended_at').val();

        let url = `/admin/buyandsell?page=${page}&size=${size}`;
        if(sort) {
            url += `&sort=${sort}`;
        }
        if(carNumber) {
            url += `&car_number=${carNumber}`;
        }
        if(dealerName) {
            url += `&dealer_name=${dealerName}`;
        }
        if(carModel) {
            url += `&car_model=${carModel}`;
        }
        if(startedAt) {
            startedAt += 'T00:00:00';
            url += `&started_at=${startedAt}`;
        }
        if(endedAt){
            endedAt += `T23:59:59`;
            url += `&ended_at=${endedAt}`;
        }
        if(successStartedAt) {
            successStartedAt += 'T00:00:00';
            url += `&success_started_at=${successStartedAt}`;
        }
        if(successEndedAt){
            successEndedAt += `T23:59:59`;
            url += `&success_ended_at=${successEndedAt}`;
        }
        Common.goPage(url);
    }

    function sortSearch(sort) {
        let page = $('#page').val();
        let size = $('#size').val();
        let direction = $('#direction').val();
        if(direction == 'DESC') {
            direction = 'ASC';
        } else {
            direction = 'DESC';
        }
        let querySort = sort+","+direction;
        goSearch(page, size, querySort);
    }

    $(function(){

        $('#btnSearch').click(function () {
            goSearch(0, 15, undefined);
        });

        $('#sortId').click(function () {
            let sort = `id`;
            sortSearch(sort);
        });

        $('#tb-header div').click(function () {
            sortSearch($(this).attr('data-sort'));
        });

        $('.btn-guide').click(function () {
            activeModal_GuideDetail();
        });

        $('.btnCarInspect').click(function () {
            $('#insComment').val('');
            Service.getInspectDetail($('#guideId').val(), function (guide) {
                setAndShowInspectDetailModal(guide);
            });
        });

        // 체크박스 전체 선택
        $(".checkbox_group").on('click', '.check_all', function() {
            $(this).parents(".checkbox_group").find('input').prop("checked", $(this).is(":checked"));
        });

        // 체크박스 개별 선택
        $(".checkbox_group").on("click", ".check_normal", function() {
            var is_checked = true;
            $(".checkbox_group .check_normal").each(function(){
                is_checked = is_checked && $(this).is(":checked");
            });
        });

        $('#btnExcelDown').click(function () {
            console.log('click excel download');
            let excelDownList = [];

            $('input:checkbox[name=checklist-01]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-02]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-03]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-04]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-05]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-06]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });

            $('input:checkbox[name=checklist-07]:checked').each(function () {
                let value = $(this).val();
                console.log(value);
                if(value != 'excel_choice') {
                    excelDownList.push(value);
                }
            });
            console.log(excelDownList);
            if(excelDownList.length == 0) {
                alert('항목을 선택해 주세요');
                return;
            }

            let url = `/admin/buyandsell/excel/download?page=` + $('#page').val() + `&size=`+ $('#size').val();
            url += `&check=${excelDownList}`;
            if($('#search').val()) {
                url += '&search=' + $('#search').val();
            }
            Common.goPage(url);
        });

        $('#searchText').keyup(function (e) {
            if(e.keyCode == 13) {
                if(!$('#searchText').val()) {
                    Common.goPage(baseUri);
                } else {
                    Common.goPage(baseUri+'?search=' + $('#searchText').val());
                }
            }
        });




        $('.btn-close_modal').click(function () {
           Common.reloadPage();
        });
        $(document).on('click', 'div[name=buy-item]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteBuyItem($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $(document).on('click', 'div[name=buy-type]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteBuyType($(this).attr('data-id'), function () {
                //$(this).remove();
                target.remove();
                //$('div[data-id=' + id + ']').remove();
            });
        });

        $(document).on('click', 'div[name=dealer-location]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteNewCarDealerLocation($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $(document).on('click', 'div[name=dealer-name]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteNewCarDealerName($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $(document).on('click', 'div[name=car-location]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteCarLocation($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $(document).on('click', 'div[name=sell-target]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteSellTarget($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $(document).on('click', 'div[name=seller]', function() {
            console.log($(this).attr('data-id'));
            let target = $(this);
            Service.deleteSeller($(this).attr('data-id'), function () {
                target.remove();
            });
        });

        $('#btnSaveBuyPrice').click(function () {
           // 매입원가 항목 추가
            let item = $('#in_buy_price').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createBuyItem('BUY_BASE_COST', item, function (data) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${data.id}">${data.name}</div>`;
                $('#buy_price_div').append(html);
            });
        });


        $('#btnSaveProdPrice').click(function () {
            let item = $('#in_prod_price').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createBuyItem('BUY_PROD_PRICE', item, function (data) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${data.id}">${data.name}</div>`;
                $('#prod_price_div').append(html);
            });
        });

        $('#btnSaveBidPrice').click(function () {
            let item = $('#in_bid_price').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createBuyItem('BUY_BID_PRICE', item, function (data) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${data.id}">${data.name}</div>`;
                $('#bid_price_div').append(html);
            });
        });

        $('#btnSaveRetailPrice').click(function () {
            let item = $('#in_retail_price').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createBuyItem('BUY_RETAIL_PRICE', item, function (data) {
                let html = `<div class="tag buy-item" name="buy-item" data-id="${data.id}">${data.name}</div>`;
                $('#retail_price_div').append(html);
            });
        });

        $('#btnSaveBuyType').click(function () {
            let item = $('#in_buy_type').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createBuyType(item, function (data) {
                let html = `<div class="tag buy-type" name="buy-type" data-id="${data.id}">${data.name}</div>`;
                $('#buy_type_div').append(html);
            });
        });

        $('#btnSaveNewDealerLocation').click(function () {
            let item = $('#in_new_dealer_location').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createNewDealer('LOCATION', item, function (data) {
                let html = `<div class="tag dealer-location" name="dealer-location" data-id="${data.id}">${data.name}</div>`;
                $('#new_dealer_location_div').append(html);
            });
        });

        $('#btnSaveNewDealerName').click(function () {
            let item = $('#in_new_dealer_name').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createNewDealer('NAME', item, function (data) {
                let html = `<div class="tag dealer-name" name="dealer-name" data-id="${data.id}">${data.name}</div>`;
                $('#new_dealer_name_div').append(html);
            });
        });

        $('#btnSaveCarLocation').click(function () {
            let item = $('#in_car_location').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createCarLocation(item, function (data) {
                let html = `<div class="tag car-location" name="car-location" data-id="${data.id}">${data.name}</div>`;
                $('#car_location_div').append(html);
            });
        });

        $('#btnSaveSellTarget').click(function () {
            let item = $('#in_sell_target').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createSellTarget(item, function (data) {
                let html = `<div class="tag sell-target" name="sell-target" data-id="${data.id}">${data.name}</div>`;
                $('#sell_target_div').append(html);
            });
        });

        $('#btnSaveSeller').click(function () {
            let item = $('#in_seller').val();
            if(!item) {
                alert('항목을 입력해주세요');
                return;
            }
            Service.createSeller(item, function (data) {
                let html = `<div class="tag seller" name="seller" data-id="${data.id}">${data.name}</div>`;
                $('#seller_div').append(html);
            });
        });

        $('#btnSaveBuyAndSell').click(function () {
            buyAndSell = {};
            setBaseInfo();
            setBuyInfo();
            setSellInfo();
            buyAndSell.sellList = sellList;
            buyAndSell.buyList = buyList;

            Service.saveBuyAndSell(function (data) {
                let buyAndSellId = data.id;
                Service.getBuyAndSellDetail(buyAndSellId, function (data) {
                    console.log(data);
                    updateBuyAndSellModalData(data);
                    alert('완료되었습니다.');
                });
            });
        });




        $(".datepicker").datepicker({
            showOn: "both",
            buttonImage: "/assets/img/date_range.png",
            buttonImageOnly: true,
            dateFormat: 'yy-mm-dd',
            monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
            dayNamesMin: ['일','월','화','수','목','금','토'],
            dayNames: ['일요일','월요일','화요일','수요일','목요일','금요일','토요일']
        });

        $('.modal-datepicker').datepicker({
            dateFormat: 'yy/mm',
            monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
            monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            dayNamesMin: ['일','월','화','수','목','금','토'],
            dayNames: ['일요일','월요일','화요일','수요일','목요일','금요일','토요일'] ,
            changeYear: true,
            changeMonth: true,
            showButtonPanel: true,
            showMonthAfterYear: true,
            onClose: function (dateText, inst) {
                $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, 1));
            }
        });

        $('.modal-datepicker2').datepicker({
            dateFormat: 'yy-mm-dd',
            monthNames: ['1월','2월','3월','4월','5월','6월','7월','8월','9월','10월','11월','12월'],
            monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            dayNamesMin: ['일','월','화','수','목','금','토'],
            dayNames: ['일요일','월요일','화요일','수요일','목요일','금요일','토요일'] ,
            changeYear: true,
            changeMonth: true,
            showButtonPanel: true,
            showMonthAfterYear: true
        });

        // 버튼 클릭 - 모달 노출
        $('.ti-standard .t-item').on('click', activeModal_Account);
        $('#btn-modal1').on('click', activeModal_Modal1);
        $('#btn-modal2').on('click', activeModal_Modal2);
        $('#btn-modal3').on('click', activeModal_Modal3);
        $('#btn-modal4').on('click', activeModal_Modal4);
        $('#btn-modal5').on('click', activeModal_Modal5);
        $('#btn-modal6').on('click', activeModal_Modal6);
        $('#btn-modal7').on('click', activeModal_Modal7);
        $('#btn-modal8').on('click', activeModal_Modal8);
        $('#btn-modal9').on('click', activeModal_Modal9);
        $('#btn-modal10').on('click', activeModal_Modal10);

        // 매출 아이템 추가
        let outcome_item = "\
            <div class='modal-content'>\
                <div class='content-item flex-row-4 mt-15'>\
                    <div class='modal-item'>\
                        <div class='modal-item_title'>매출처</div>\
                        <div class='modal-item_content'>\
                            <select class='mi_select' name='' id=''>\
                                <option value=''>전체</option>\
                                <option value=''>옵션1</option>\
                                <option value=''>옵션2</option>\
                            </select>\
                        </div>\
                    </div>\
                    <div class='modal-item'>\
                        <div class='modal-item_title'>판매예상가</div>\
                        <div class='modal-item_content'>\
                            <input class='mi_input' type='text'>\
                        </div>\
                    </div>\
                    \
                    <div class='modal-item'>\
                        <div class='modal-item_title'>판매가</div>\
                        <div class='modal-item_content'>\
                            <input class='mi_input' type='text'>\
                        </div>\
                    </div>\
                    \
                    <div class='modal-item'>\
                        <div class='modal-item_title'>기타 수수료 수입</div>\
                        <div class='modal-item_content'>\
                            <input class='mi_input' type='text'>\
                        </div>\
                    </div>\
                </div>\
                \
                <div class='content-item mt-15'>\
                    <div class='modal-item'>\
                        <div class='modal-item_title'>비고</div>\
                        <div class='modal-item_content'>\
                            <input class='mi_input' type='text'>\
                        </div>\
                    </div>\
                </div>\
            </div>\
        ";

        $('.add-outcome_item').on('click', ()=>{
            $('.outcome-list').prepend(getSellItemHtml());
        });

    });

    function activeModal_GuideDetail(){
        guidePriceList = [];
        guideCommentList = [];
        guidePriceCommentList = [];

        let guideId = $('#guideId').val();
        Service.getGuideDetail(guideId, function (data) {
            setAndShowGuideDetailModal(data, false);
        });
    }



    function activeModal_ExcelDownload() {
        openLayer();
        $('.modal-excel_download').addClass('active');
    }

    function searchValue(size) {
        goAnotherPage($('#page').val(), size);
    }

    function setAndShowGuideDetailModal(data, dynamicLinkYn) {
        $('#modal_guide_id').val(data.id);
        $('#modal_guide_serial').text(data.serial);

        var manageBranch = "";
        if(data.manageBranch) {
            manageBranch = data.manageBranch;
        }
        $('#modal_writer_name').val(data.memberName + '(' + manageBranch + ')');
        $('#modal_writer_email').val(data.memberEmail);
        $('#modal_writer_phone').val(data.memberPhone);
        $('#modal_writer_phone').val(data.memberPhone);
        $('#modal_writer_group_branch').val(data.memberGroup + "/" + data.memberBranch);
        $('#modal_customer_name').val(data.customerName);
        $('#modal_customer_phone').val(data.customerContact);

        $('#modal_car_manufacturer').val(data.carManufacturer);
        $('#modal_car_model_name').val(data.carModel);
        $('#modal_car_model_detail').val(data.carModelDetail);
        $('#modal_car_class_name').val(data.carClassName);
        $('#modal_car_trim_name').val(data.carTrim);
        $('#modal_car_maded_in').val(data.carMadedYear + "/" + data.carMadedMonth);
        let fuelType = '';
        if(data.fuelType == 'GAS') {
            fuelType = '가솔린';
        } else if(data.fuelType == 'DIESEL') {
            fuelType = '디젤';
        } else if(data.fuelType == 'LPG') {
            fuelType = 'LPG';
        } else if(data.fuelType == 'GAS_LPG') {
            fuelType = '가솔린(LPG겸용)';
        } else if(data.fuelType == 'GAS_CNG') {
            fuelType = '가솔린(CNG겸용)';
        } else if(data.fuelType == 'GAS_HYBRID') {
            fuelType = '가솔린 하이브리드';
        } else if(data.fuelType == 'ELECTRIC') {
            fuelType = '전기';
        } else if(data.fuelType == 'HYDROGEN') {
            fuelType = '수소';
        }
        $('#modal_car_fuel_type').val(fuelType);
        $('#modal_car_displacement').val(data.carDisplacement);
        let motorType='';
        if(data.motorType == 'MANUAL') {
            motorType = "수동";
        } else if(data.motorType == 'AUTOMATIC') {
            motorType = "자동";
        } else if(data.motorType == 'CVT') {
            motorType = "CVT";
        } else if(data.motorType == 'DUAL') {
            motorType = "듀얼클러치";
        }
        $('#modal_car_motor_type').val(motorType);
        $('#modal_car_mileage').val(data.mileage);

        let accident = '';
        if(data.accident == 'NONE') {
            accident = "무사고";
        } else if(data.accident == 'SIMPLE_CHANGE') {
            accident = "단순교환";
        } else if(data.accident == 'INSURANCE') {
            accident = "보험사고";
        } else if(data.accident == 'SPECIAL') {
            accident = "특수사고(전손/침수)";
        }
        $('#modal_car_accident').val(data.accident);
        $('#modal_car_color').val(data.carColor);
        $('#modal_car_number').val(data.carNumber);

        $('#modal_option_div').empty();
        data.options.forEach(function (item) {
            let html = `<span class="option-item">${item.option}</span>`;
            $('#modal_option_div').append(html);
        });


        let option = '';
        if(data.option1) {
            option += data.option1;
        }
        if(data.option2) {
            option += " " + data.option2;
        }
        if(data.option3) {
            option += " " + data.option3;
        }
        $('#modal_other').val(option);


        $('#modal_guide_status').val(data.guideStatus);
        $('#modal_guide_car_location').val(data.carLocation);

        if(data.priceList){
            guidePriceList = data.priceList;
            updateViewPriceValue();
        }
        if(data.commentList) {
            guideCommentList = data.commentList;
            updateViewGuideCommentList();
        }

        $('#modal_admin_name').val(data.adminName);
        $('#modal_admin_phone').val(data.adminPhone);

        let guidePriceTemp = (data.price / 10000);
        $('#guide_price').text(Common.comma(guidePriceTemp) + ' 만원');
        //$('#guide_price').text(Common.comma(data.price) + ' 원');
        guidePrice = data.price;

        $('#modal_guide_diff_price').val('');
        if(data.sendPrice) {
            $('#modal_guide_price').val(data.sendPrice);
            let diffPrice = data.sendPrice - data.price;
            if(diffPrice) {
                $('#modal_guide_diff_price').val(diffPrice);
            } else {
                console.log('diffPrice : false ' + diffPrice);
                $('#modal_guide_diff_price').val('');
            }
        } else {
            $('#modal_guide_price').val(data.price);
        }

        $('#modal_retail_avg_price').val(data.retailAvgPrice);
        $('#modal_bid_avg_price').val(data.bidAvgPrice);

        if(data.additionalImages) {
            guideAddImgList = data.additionalImages;
            updateViewGuideImgList();
        }

        $('#guide-history').empty();
        data.guideHistory.forEach(function (item) {
            let sellPrice = item.sellPrice;
            let finalBuyPrice = item.finalBuyPrice;
            let newCarPrice = item.newCarPrice;
            if(!sellPrice) { sellPrice = 0; }
            if(!finalBuyPrice) { finalBuyPrice = 0; }
            if(!newCarPrice) { newCarPrice = 0; }
            let notiHtml = ``;
            notiHtml += `<div class="t-item">`;
            notiHtml += `<div class="td"><span>${item.serial}</span></div>`;
            notiHtml += `<div class="td"><span>${item.carMadedYear} / ${item.carMadedMonth}</span></div>`;
            notiHtml += `<div class="td"><span>${item.mileage}</span></div>`;
            notiHtml += `<div class="td"><span>${item.accidentStr}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(newCarPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(item.sendPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(finalBuyPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma(sellPrice / 10000)}</span></div>`;
            notiHtml += `<div class="td"><span>${Common.comma((sellPrice - finalBuyPrice) / 10000)}</span></div>`;
            notiHtml += `</div>`;
            $('#guide-history').append(notiHtml);
        });
        AutoTableSetting();

        $('#guide_notification').empty();
        data.guideNotificationList.forEach(function (item) {
            let html = ``;
            html += `<div class="note-item">`;
            html += `<span class="note-date">${item.createdAtStr}</span>`;
            html += `<span class="note-desc">${item.body}</span>`;
            html += `</div>`;
            $('#guide_notification').append(html);
        });

        $('#modal_new_car_price').val(data.newCarPrice / 10000);

        openLayer();

        $('.modal-account').removeClass('active');
        $('.modal-check_list').removeClass('active');
        $('.modal-guide_detail').addClass('active');
        if(dynamicLinkYn) {
            activeModal_GuidePrice();
        }
    }

    function updateViewPriceValue() {
        $('#modal_price_enar').val(0);
        $('#modal_price_kcar').val(0);
        $('#modal_price_kb').val(0);
        $('#modal_price_how').val(0);
        $('#modal_price_kcar_biding').val(0);
        $('#modal_price_car_auction_biding').val(0);

        let guideCount = 0;
        for (let i = 0; i < guidePriceList.length; i++) {
            let inner = guidePriceList[i];
            let price = Common.comma(inner.price);
            let marketName = inner.marketName;
            let popularType = inner.popularType;
            let marketNameCode = inner.marketNameCode;
            let id = inner.id;
            if(inner.marketNameCode == 'RETAIL_SK_ENCAR') {
                $('#modal_price_enar_id').val(id);
                $('#modal_price_enar').val(price);
                $('#modal_price_enar_name').val(marketName);
                $('#modal_price_enar_popular').val(popularType);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketNameCode == 'RETAIL_KCAR') {
                $('#modal_price_kcar_id').val(id);
                $('#modal_price_kcar').val(price);
                $('#modal_price_kcar_name').val(marketName);
                $('#modal_price_kcar_popular').val(popularType);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketNameCode == 'RETAIL_KB') {
                $('#modal_price_kb_id').val(id);
                $('#modal_price_kb').val(price);
                $('#modal_price_kb_name').val(marketName);
                $('#modal_price_kb_popular').val(popularType);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketNameCode == 'RETAIL_HOW') {
                $('#modal_price_how_id').val(id);
                $('#modal_price_how').val(price);
                $('#modal_price_how_name').val(marketName);
                $('#modal_price_how_popular').val(popularType);
                if(price != '0') {
                    guideCount++;
                }
            } else if(inner.marketNameCode == 'BID_KCAR') {
                $('#modal_price_kcar_biding_id').val(id);
                $('#modal_price_kcar_biding').val(price);
                $('#modal_price_kcar_biding_name').val(marketName);
                $('#modal_price_kcar_biding_popular').val(popularType);
            } else if(inner.marketNameCode == 'BID_CAR_AUCTION') {
                $('#modal_price_car_auction_biding_id').val(id);
                $('#modal_price_car_auction_biding').val(price);
                $('#modal_price_car_auction_biding_name').val(marketName);
                $('#modal_price_car_auction_biding_popular').val(popularType);
            }
        }

        $('#btnSendGuide').addClass('gone');
        if(guideCount >= 2) {
            // 가이드 설정이 되어 있으면 전송버튼 활성
            $('#btnSendGuide').removeClass('gone');
        }
    }

    function updateViewGuideCommentList() {
        $('#modal_guide_comment').empty();
        $('#modal_guide_comment_2').empty();
        guideCommentList.forEach(function (item) {
            let commentHtml = "";
            commentHtml += `<div class="modal-item mt-15" comment-id="${item.id}">`;
            commentHtml += `<div class="modal-item_title">${item.member.name}<span class="item-date">${item.createdAt}</span>`;
            commentHtml += `</div>`;
            commentHtml += `<div class="modal-item_content">`;
            commentHtml += `<input class="mi_input" value="${item.body}" type="text" readonly="readonly"> `;
            commentHtml += `</div>`;
            commentHtml += `</div>`;
            $('#modal_guide_comment').append(commentHtml);
            $('#modal_guide_comment_2').append(commentHtml);

        });
    }

    function updateViewGuideImgList() {
        $('#modal_guide_images').empty();
        $('div[name=guide-image]').empty();
        guideAddImgList.forEach(function (item) {
            if(item.imgUrl) {
                let commentHtml = "";
                commentHtml += `<a class="image-item" href="${item.imgUrl}" target="_blank">`;
                commentHtml += `<img style="width: 130px; height: 130px;" src="${item.imgUrl}" alt="">`;
                commentHtml += `</a>`;
                //$('#modal_guide_images').append(commentHtml);
                $('div[name=guide-image]').append(commentHtml);
            }
        });
    }

    function setAndShowInspectDetailModal(guide) {
        $('#ins_name').val(guide.memberName +"(" + guide.memberManageBranch + ")");
        $('#ins_email_address').val(guide.memberEmail);
        $('#ins_member_phone').val(guide.memberPhone);
        $('#ins_member_group').val(guide.memberGroup + "/" + guide.memberBranch);
        $('#ins_car_manufacturer').val(guide.carManufacturer);
        $('#ins_car_model').val(guide.carModel);
        $('#ins_car_model_detail').val(guide.carModelDetail);
        $('#ins_car_class').val(guide.carClassName);
        $('#ins_car_trim').val(guide.carTrim);
        $('#ins_car_made').val(guide.carMadedYear + "/" + guide.carMadedMonth);
        let fuelType = '';
        if(guide.fuelType == 'GAS') {
            fuelType = '가솔린';
        } else if(guide.fuelType == 'DIESEL') {
            fuelType = '디젤';
        } else if(guide.fuelType == 'LPG') {
            fuelType = 'LPG';
        } else if(guide.fuelType == 'GAS_LPG') {
            fuelType = '가솔린(LPG겸용)';
        } else if(guide.fuelType == 'GAS_CNG') {
            fuelType = '가솔린(CNG겸용)';
        } else if(guide.fuelType == 'GAS_HYBRID') {
            fuelType = '가솔린 하이브리드';
        } else if(guide.fuelType == 'ELECTRIC') {
            fuelType = '전기';
        } else if(guide.fuelType == 'HYDROGEN') {
            fuelType = '수소';
        }
        $('#ins_fuel_type').val(fuelType);
        $('#ins_car_displacement').val(guide.carDisplacement);
        let motorType='';
        if(guide.motorType == 'MANUAL') {
            motorType = "수동";
        } else if(guide.motorType == 'AUTOMATIC') {
            motorType = "자동";
        } else if(guide.motorType == 'CVT') {
            motorType = "CVT";
        } else if(guide.motorType == 'DUAL') {
            motorType = "듀얼클러치";
        }
        $('#ins_motor_type').val(motorType);
        $('#ins_mileage').val(guide.mileage);
        let accident = '';
        if(guide.accident == 'NONE') {
            accident = "무사고";
        } else if(guide.accident == 'SIMPLE_CHANGE') {
            accident = "단순교환";
        } else if(guide.accident == 'INSURANCE') {
            accident = "보험사고";
        } else if(guide.accident == 'SPECIAL') {
            accident = "특수사고(전손/침수)";
        }
        $('#ins_accident').val(accident);
        $('#ins_car_color').val(guide.carColor);
        $('#ins_car_number').val(guide.carNumber);
        let option = '';
        if(guide.option1) {
            option += guide.option1;
        }
        $('#modal_car_option1').val(option);
        option = '';
        if(guide.option2) {
            option = guide.option2;
        }
        $('#modal_car_option2').val(option);
        option = '';
        if(guide.option3) {
            option = guide.option3;
        }
        $('#ins_option').val(option);

        $('#ins_option_div').empty();
        guide.options.forEach(function (item) {
            let span = `<span class="option-item">${item.option}</span>`;
            $('#ins_option_div').append(span);
        });

        $('#ins_gi_gyohwan_cnt').text(guide.damageGiGyohwanCnt);
        $('#ins_gi_gyohwan_price').text(guide.damageGiGyohwanPrice);

        $('#ins_gi_pangum_cnt').text(guide.damageGiPangumCnt);
        $('#ins_gi_pangum_price').text(guide.damageGiPangumPrice);

        $('#ins_gi_dosaek_cnt').text(guide.damageGiDosaekCnt);
        $('#ins_gi_dosaek_price').text(guide.damageGiDosaekPrice);

        $('#ins_need_gyohwan_cnt').text(guide.damageNeedGyohwanCnt);
        $('#ins_need_gyohwan_price').text(guide.damageNeedGyohwanPrice);

        $('#ins_need_pangum_cnt').text(guide.damageNeedPangumCnt);
        $('#ins_need_pangum_price').text(guide.damageNeedPangumPrice);

        $('#ins_need_dosaek_cnt').text(guide.damageNeedDosaekCnt);
        $('#ins_need_dosaek_price').text(guide.damageNeedDosaekPrice);

        $('#ins_other_cnt').text(guide.damageOtherCnt);
        $('#ins_other_price').text(guide.damageOtherPrice);

        if(guide.inspectTopImgUrl) {
            $('#ins_damage_top_img_url').attr('src' , guide.inspectTopImgUrl);
        }
        if(guide.inspectSideImgUrl) {
            $('#ins_damage_side_img_url').attr('src' , guide.inspectSideImgUrl);
        }
        if(guide.inspectBottomImgUrl) {
            $('#ins_damage_bottom_img_url').attr('src' , guide.inspectBottomImgUrl);
        }

        $('#ins_guide_price').val(guide.price);
        $('#ins_damage_minus_price').val(guide.damageMinusPrice);
        $('#ins_check_minus_price').val(guide.checkMinusPrice);
        $('#ins_evaluator_minus_price').val(guide.evaluatorMinusPrice);
        $('#ins_evaluator_minus_reason').val(guide.evaluatorMinusReason);

        let totalCheckListPrice = 0;
        $('.checked-item-list').empty();
        let checkHtml = ``;
        guide.checkList.forEach(function (item) {
            totalCheckListPrice += item.price;
            checkHtml += `<div class="checked-item">`;
            checkHtml += `<p class="ci-tit">${item.question}</p>`;
            checkHtml += `<p class="ci-price">${item.price} 원</p>`;
            checkHtml += `</div>`;
        });
        if(guide.tireWearType) {
            checkHtml += `<div class="checked-item">`;
            if(guide.tireWearType == 'EA_0') {
                checkHtml += `<p class="ci-tit">타이어 마모 [0 EA]</p>`;
            } else if(guide.tireWearType == 'EA_1') {
                checkHtml += `<p class="ci-tit">타이어 마모 [1 EA]</p>`;
            } else if(guide.tireWearType == 'EA_2') {
                checkHtml += `<p class="ci-tit">타이어 마모 [2 EA]</p>`;
            } else if(guide.tireWearType == 'EA_3') {
                checkHtml += `<p class="ci-tit">타이어 마모 [3 EA]</p>`;
            } else if(guide.tireWearType == 'EA_4') {
                checkHtml += `<p class="ci-tit">타이어 마모 [4 EA]</p>`;
            } else if(guide.tireWearType == 'OTHER') {
                checkHtml += `<p class="ci-tit">타이어 마모 [기타]</p>`;
            }
            checkHtml += `<p class="ci-price">${guide.tireWearPrice} 원</p>`;
            checkHtml += `</div>`;
        }

        $('.checked-item-list').append(checkHtml);

        $('#ins_check_list_total').val(totalCheckListPrice);
        $('#ins_tire_wear_reason').val(guide.tireWearReason);

        $('#ins_final_minus_price').val(guide.finalMinusPrice);
        $('#ins_loss_price').val(guide.lossPrice);
        if(guide.finalBuyPrice) {
            $('#ins_final_buy_price').text(Common.comma(guide.finalBuyPrice));
        } else {
            $('#ins_final_buy_price').text('');
        }

        $('#ins_guide_comment').empty();
        guide.inspectCommentList.forEach(function (item) {
            let commentHtml = "";
            commentHtml += `<div class="modal-item mt-15" comment-id="${item.id}">`;
            commentHtml += `<div class="modal-item_title">${item.member.name}<span class="item-date">${item.createdAt}</span>`;
            commentHtml += `</div>`;
            commentHtml += `<div class="modal-item_content">`;
            commentHtml += `<input class="mi_input" value="${item.body}" type="text" readonly="readonly"> `;
            commentHtml += `</div>`;
            commentHtml += `</div>`;
            $('#ins_guide_comment').append(commentHtml);
        });

        if(guide.additionalImages) {
            guideAddImgList = guide.additionalImages;
            updateViewGuideImgList();
        }

        openLayer();
        $('.modal-account').removeClass('active');
        $('.modal-guide_detail').removeClass('active');
        $('.modal-check_list').addClass('active');
    }


    let Service = {
        saveBuyAndSell: function (_func) {
            let id = $('#buy_and_sell_id').val();

            console.log('id ' + id);
            console.log(buyAndSell);

            var url = "/api/admin/v1/buyandsell/" + id;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(buyAndSell)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createCarLocation: function (item, _func) {
            var url = "/api/admin/v1/buyandsell/car_location";
            let obj = {};
            obj.name = item;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createSellTarget: function (item, _func) {
            var url = "/api/admin/v1/buyandsell/sell_target";
            let obj = {};
            obj.name = item;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteSellTarget: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/sell_target/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteCarLocation: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/car_location/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteNewCarDealerName: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/dealer/name/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createNewDealer: function (type, item, _func) {
            var url = "/api/admin/v1/buyandsell/dealer/name";
            if(type == 'LOCATION') {
                url = "/api/admin/v1/buyandsell/dealer/location";
            }
            let obj = {};
            obj.name = item;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteNewCarDealerLocation: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/dealer/location/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createBuyType: function (item, _func) {
            let obj = {};
            obj.name = item;

            var url = "/api/admin/v1/buyandsell/buy_type";
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createSeller: function (item, _func) {
            let obj = {};
            obj.name = item;

            var url = "/api/admin/v1/buyandsell/seller";
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteBuyType: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/buy_type/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteSeller: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/seller/" + id;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getSellers: function (_func) {
            var url = "/api/admin/v1/buyandsell/seller";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getSellTargets: function (_func) {
            var url = "/api/admin/v1/buyandsell/sell_target";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getCarLocation: function (_func) {
            var url = "/api/admin/v1/buyandsell/car_location";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getNewDealer: function (type, _func) {
            var url = "/api/admin/v1/buyandsell/dealer/name";
            if(type == 'LOCATION') {
                url = "/api/admin/v1/buyandsell/dealer/location";
            }
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getBuyTypes: function (_func) {
            var url = "/api/admin/v1/buyandsell/buy_type";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        deleteBuyItem: function (id, _func) {
            var url = "/api/admin/v1/buyandsell/item/" + id ;
            var ajaxParam = {
                "url": url,
                "type": "DELETE",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createBuyItem: function (itemType, item, _func) {
            let obj = {};
            obj.itemType = itemType;
            obj.name = item;
            var url = "/api/admin/v1/buyandsell/item" ;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(obj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        getBuyItems: function (itemType, _func) {
            var url = "/api/admin/v1/buyandsell/item?item_type=" + itemType ;
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },

        getBuyAndSellDetail: function (buyAndSellId, _func) {
            var url = "/api/admin/v1/buyandsell/" + buyAndSellId;
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    $('#buy_and_sell_id').val(data.data.id);
                    _func(data.data);
                    return;
                }
                return;
            });
        },
        createGuideComment: function (guideId, comment) {
            var url = "/api/admin/v1/guide/" + guideId + "/comment";
            let updateObj = {};
            updateObj.commentType = 'GUIDE';
            updateObj.body = comment;
            var ajaxParam = {
                "url": url,
                "type": "POST",
                "data": JSON.stringify(updateObj)
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    $('#modal_guide_comment_input').val('');
                    let newComment = data.data;
                    guideCommentList.push(newComment);
                    updateViewGuideCommentList();
                    return;
                }
                return;
            });
        },

        getGuideDetail: function (guideId, _func) {
            let obj = {};
            var url = "/api/admin/v1/guide/" + guideId;
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                }
                return;
            });
        },

        getInspectDetail: function (guideId, _func) {
            var url = "/api/admin/v1/guide/" + guideId + "/inspect";
            var ajaxParam = {
                "url": url,
                "type": "GET",
                "data": ""
            }
            Common.ajaxJSONV2(ajaxParam, function (data) {
                if (!data) {
                    alert('return data error');
                    return false;
                }
                if (data.result != 0) {
                    alert(data.message);
                    return;
                } else {
                    _func(data.data);
                    return;
                }
                return;
            });
        },

    }

</script>
